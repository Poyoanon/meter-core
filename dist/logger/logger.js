var it=Object.defineProperty;var Kr=Object.getOwnPropertyDescriptor;var Rr=Object.getOwnPropertyNames;var Lr=Object.prototype.hasOwnProperty;var Ar=(t,n)=>{for(var e in n)it(t,e,{get:n[e],enumerable:!0})},wr=(t,n,e,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let u of Rr(n))!Lr.call(t,u)&&u!==e&&it(t,u,{get:()=>n[u],enumerable:!(o=Kr(n,u))||o.enumerable});return t};var Br=t=>wr(it({},"__esModule",{value:!0}),t);var Ns={};Ar(Ns,{LiveLogger:()=>Pi,Logger:()=>Wn,ReplayLogger:()=>Ti});module.exports=Br(Ns);var hr=require("tiny-typed-emitter");var a=class{b;o;constructor(n){this.b=n,this.o=0}skip(n=0){this.o+=n}bool(){return this.u8()===1}u8(){return this.b.readUint8(this.o++)}i8(){return this.b.readInt8(this.o++)}u16(){let n=this.b.readUint16LE(this.o);return this.o+=2,n}i16(){let n=this.b.readInt16LE(this.o);return this.o+=2,n}u32(){let n=this.b.readUint32LE(this.o);return this.o+=4,n}i32(){let n=this.b.readInt32LE(this.o);return this.o+=4,n}f32(){let n=this.b.readFloatLE(this.o);return this.o+=4,n}u64(){let n=this.b.readBigUint64LE(this.o);return this.o+=8,n}i64(){let n=this.b.readBigInt64LE(this.o);return this.o+=8,n}string(n){let e=this.u16();if(e<=n){e=e*2;let o=this.b.toString("utf16le",this.o,this.o+e);return this.o+=e,o}return""}bytes(n=0,e,o){if(e&&n>e)return Buffer.alloc(0);o&&(n=n*o);let u=Buffer.from(this.b.subarray(this.o,this.o+n));return this.o+=n,u}array(n,e,o){return o&&n>o?[]:new Array(n).fill(void 0).map(e)}},Un=class{b;o;constructor(n=65535){this.b=Buffer.allocUnsafe(n),this.o=0}get value(){return this.b.subarray(0,this.o)}skip(n=0){this.o+=n}bool(n=!1){return this.u8(n?1:0),n}u8(n=0){this.b.writeUInt8(n,this.o++)}i8(n=0){this.b.writeInt8(n,this.o++)}u16(n=0){this.o=this.b.writeUInt16LE(n,this.o)}i16(n=0){this.o=this.b.writeInt16LE(n,this.o)}u32(n=0){this.o=this.b.writeUInt32LE(n,this.o)}i32(n=0){this.o=this.b.writeInt32LE(n,this.o)}f32(n=0){this.o=this.b.writeFloatLE(n,this.o)}u64(n=0n){this.o=this.b.writeBigUInt64LE(BigInt(n),this.o)}i64(n=0n){this.o=this.b.writeBigInt64LE(BigInt(n),this.o)}string(n="",e=0){this.u16(n.length),n.length<=e&&(this.o+=this.b.write(n,this.o,"utf16le"))}bytes(n=Buffer.alloc(0),e={}){if(e.maxLen){let o=e.multiplier??1;if(n.length%o)throw new Error(`Error writing bytes, chunkSize should be a multiple of intut value size, got ${n.length}%${o}`);let u=n.length/o;if(u>e.maxLen)throw new Error(`Error writing bytes, input value size exceeded maxLen, got ${u} > ${e.maxLen}`);if(!e.lenType)throw new Error(`Error writing bytes, invalid lenType when writing chunks, got ${e.lenType}`);this[e.lenType](u)}else if(e.length&&n.length!==e.length)throw new Error(`Error writing bytes, input value size doesn't match opts.length, ${n.length} !== ${e.lenType}`);this.o+=n.copy(this.b,this.o)}array(n=[],e,o){if(n===void 0||n.length>e.maxLen){this[e.lenType](0);return}this[e.lenType](n.length),n.forEach(o)}};function L(t){let n={};return n.points=t.u16(),n.id=t.u32(),n.level=t.u8(),n}function st(t){let n=new a(t),e={};return e.abilityDataList=n.array(n.u16(),()=>L(n),100),e}var _t="PKTAbilityChangeNotify",q=34237;function Ni(t){let n={};return n.level=t.u32(),n.featureType=t.u16(),n}function mt(t){let n=new a(t),e={};return e.activeAbilityList=n.array(n.u16(),()=>Ni(n),60),e.objectId=n.u64(),e}var ft="PKTActiveAbilityNotify",W=23742;function lt(t){let n=new a(t),e={};return e.addonFeatureIdList=n.bytes(n.u16(),200,4),e.objectId=n.u64(),e.addonSkillFeatureList=n.array(n.u16(),()=>{let o={};return o.skillId=n.u32(),o.addonSkillFeatureIdList=n.array(n.u16(),()=>n.u32(),5),o},200),e}var dt="PKTAddonSkillFeatureChangeNotify",O=9808;function pt(t){let n=new a(t),e={};return e.packetResultCode=n.u32(),e.unk1_m=n.bytes(n.u32(),688),e}var ct="PKTAuthTokenResult",bt=24597;function kt(t){let n=new a(t),e={};return e.paralyzationPoint=n.u32(),e.type=n.u8(),n.skip(1),e.paralyzationMaxPoint=n.u32(),n.skip(2),e.objectId=n.u64(),e}var xt="PKTBlockSkillStateNotify",U=43110;function Pt(t){let n=new a(t),e={};return n.skip(1),e.targetId=n.u64(),n.skip(1),e.sourceId=n.u64(),e.type=n.u32(),e}var Tt="PKTCounterAttackNotify",Z=2889;function St(t){let n=new a(t),e={};return e.unk0=n.u64(),n.bool()&&(e.unk2_0=n.u8()),e.targetId=n.u64(),e.unk4=n.u32(),e.unk5=n.u32(),e.unk6=n.u8(),e.sourceId=n.u64(),n.bool()&&(e.unk9_0=n.u8()),e.unk10=n.u16(),n.bool()&&(e.unk12_0=n.u8()),e}var Nt="PKTDeathNotify",z=20789;var Mr=[0,31,28,31,30,31,30,31,31,30,31,30,31];function jr(t){return!(t%4||!(t%100)&&t%400)}function Fr(t,n,e){if(t>99){if(t<1752||t==1752&&(n<9||n==9&&e<<14))return!1}else t+=1900;return e>0&&n<=12&&(e<=Mr[n]||e==29&&n==2&&jr(t))}function vt(t){let n=Number(t&0xffffffffn),e=Number(t>>32n&0xffffffffn),o=n&4095,u=(n&65535)>>12,s=n>>16&31;Fr(o,u,s)||(o=u=s=0);let _=n>>21&31,x=n>>26&63,R=e&63,N=e>>6&16383;return _<24&&x<60&&R<60&&N<1e3||(_=24,x=R=N=0),new Date(Date.UTC(o<=99?o+1900:o,u-1,s,_,x,R,N))}function vi(t){let n=0n;return n|=BigInt(t.getUTCMilliseconds())<<38n,n|=BigInt(t.getUTCSeconds())<<32n,n|=BigInt(t.getUTCMinutes())<<26n,n|=BigInt(t.getUTCHours())<<21n,n|=BigInt(t.getUTCDate())<<16n,n|=BigInt(t.getUTCMonth()+1)<<12n,n|=BigInt(t.getUTCFullYear()<2e3?t.getUTCFullYear()-1900:t.getUTCFullYear()),n}function l(t,n=0){let e=t.u16();return(e&4095)<2079?(t.o-=2,vt(t.i64())):vt(BigInt(e)&0xfffn|0x11000n)}function v(t,n=vt(0x1181fn)){n.getUTCFullYear()>=2079?t.u16(Number(vi(n)&0xffffn)):t.i64(vi(n))}function T(t){let n={};return n.slot=t.u16(),n.expireTime=l(t),n.level=t.u16(),t.bool()&&(n.unk4_0=t.u8()),n.itemTint=t.bytes(t.u16(),5,14),n.id=t.u32(),n}function ht(t){let n=new a(t),e={};return e.equipItemDataList=n.array(n.u16(),()=>T(n),33),e.objectId=n.u64(),e.unk2=n.u32(),e.unk3=n.u32(),e}var It="PKTEquipChangeNotify",V=46264;function Et(t){let n=new a(t),e={};return e.objectId=n.u64(),e.equipLifeToolDataList=n.array(n.u16(),()=>T(n),9),e}var Dt="PKTEquipLifeToolChangeNotify",H=15165;function Kt(t){let n=new a(t),e={};return e.objectId=n.u64(),e.stance=n.u8(),n.skip(1),e}var Rt="PKTIdentityStanceChangeNotify",G=74;function Lt(t){let n=new a(t),e={};return e.struct_135=n.bytes(n.u16(),353,48),e.abilityDataList=n.array(n.u16(),()=>L(n),100),e}var At="PKTInitAbility",Y=27635;function wt(t){let n=new a(t),e={};return e.lostArkDateTime=l(n),e.unk1=n.u32(),e.unk2=n.u8(),e.playerId=n.u64(),e.unk4=n.u32(),e.unk5=n.u64(),e.struct_29=n.array(n.u16(),()=>{let o={};return o.versionString=n.string(64),o.struct_573=n.string(32),o.struct_590=n.string(128),o},64),e.struct_590=n.string(128),e}var Bt="PKTInitEnv",$=43544;function c(t){let n={};return n.stackCount=t.u8(),n.skillLevel=t.u8(),n.totalTime=t.f32(),n.endTick=t.u64(),n.struct_441=t.bytes(t.u16(),8,7),n.effectInstanceId=t.u32(),n.occurTime=l(t),t.bool()&&(n.unk8_0=t.u64()),n.sourceId=t.u64(),t.bool()&&(n.value=t.bytes(16)),n.statusEffectId=t.u32(),n}function qr(t){if(t.length===0)return 0n;if(t.length>8)throw new Error("Value is too large");let n=Buffer.alloc(8);return t.copy(n),n.readBigInt64LE()}function i(t,n=0){let e=t.u8(),o=t.bytes(e>>1&7),u=qr(o)<<4n|BigInt(e>>4);return e&1?-u:u}function m(t,n=0n){let e=Buffer.alloc(8),o=n<0n;e.writeBigInt64LE((o?-n:n)>>4n);let u=0;for(let[s,_]of e.entries())_!=0&&(u=s+1);if(u>7)throw new Error("Value is too large");t.u8(Number((o?-n:n)&0xfn)<<4|(u&7)<<1|(o?1:0)),t.bytes(e.subarray(0,u),{length:u})}function A(t){let n={};return n.unk0=i(t),n.unk1=t.u16(),n.unk2=t.u8(),n.unk3=t.u64(),n.unk4=i(t),n.unk5=t.u8(),n.unk6=t.u8(),n}function Mt(t){let n=new a(t),e={};return e.unk0=n.u16(),e.unk1=n.u64(),e.unk2=n.u8(),e.unk3=n.u16(),e.unk4=n.u32(),e.unk5=n.u64(),e.playerId=n.u64(),e.unk7=n.u8(),e.unk8=n.u8(),e.struct_367=n.string(7),e.unk10=n.u8(),e.unk11=n.u8(),e.statusEffectDatas=n.array(n.u16(),()=>c(n),80),e.unk13=n.bytes(35),e.unk14=n.u32(),e.unk15=n.u8(),e.unk16=n.u8(),e.unk17=n.u32(),e.unk18=n.u8(),e.level=n.u16(),e.unk20=n.u64(),e.characterId=n.u64(),e.unk22=n.u8(),e.unk23=n.u8(),e.unk24=n.u32(),e.unk25=n.u8(),e.unk26=n.u16(),e.unk27=n.u8(),e.classId=n.u16(),e.unk29=n.u64(),e.unk30=n.u8(),e.unk31=n.bytes(120),e.unk32=n.u32(),e.unk33=n.u8(),e.unk34=n.u8(),e.unk35=n.u16(),e.unk36=n.u8(),e.unk37=n.u32(),e.struct_103=n.bytes(n.u16(),63),e.unk39=n.u32(),e.unk40=n.bytes(25),e.unk41=n.u32(),e.unk42=n.u8(),e.unk43=n.u32(),n.bool()&&(e.unk45_0=n.u32()),e.unk46=n.u8(),e.unk47=n.u64(),e.struct_226=n.bytes(n.u16(),3,17),e.statPair=n.array(n.u16(),()=>{let o={};return o.value=i(n),o.statType=n.u8(),o},153),e.struct_344=n.bytes(n.u16(),104,30),e.unk51=n.u8(),e.unk52=n.u32(),e.periodUpdateStatDataList=n.array(n.u16(),()=>A(n),5),e.gearLevel=n.f32(),e.name=n.string(20),e.unk56=n.u32(),e.unk57=n.u8(),e}var jt="PKTInitPC",J=56597;function hi(t){let n={},e=t.u16();return e===1&&(n.unk1_0=t.bytes(e)),n}function Ii(t){let n={};return n.unk0=t.u32(),n.unk1=t.u8(),n.unk2=t.u8(),n.struct_144=hi(t),n.unk4=t.u8(),n.unk5=t.u32(),n.unk6=t.u8(),n.struct_145=t.bytes(t.u16(),3,9),n}function Ei(t){let n={};return n.unk0=t.u32(),n.struct_240=t.bytes(t.u16(),10,18),n.unk2=t.u64(),n.struct_393=t.bytes(t.u16(),2,10),n.unk4=t.u32(),n.unk5=t.u32(),n.unk6=t.u32(),n.unk7=t.u16(),n.unk8=t.u8(),n.struct_146=t.bytes(t.u16(),10,9),n.unk10=t.u32(),n.unk11=t.u32(),n.struct_238=t.array(t.u16(),()=>Ii(t),3),n.struct_261=t.bytes(t.u16(),2,9),n}function Di(t){let n={};return n.unk0=t.u16(),n.unk1=t.u8(),n.struct_97=t.bytes(t.u32(),51),n.unk3=t.u16(),n.unk4=t.u8(),n.unk5=t.bytes(3),n.unk6=t.u8(),n.unk7=t.u16(),n}function Ki(t){let n={};return n.unk0=t.bytes(t.u16(),7),n.unk1=t.bytes(t.u16(),7),t.bool()&&(n.struct_746=Di(t)),n.unk4=t.u8(),n}function Ri(t){let n={};return n.unk0=t.u32(),n.unk1=t.u32(),n.unk2=t.u32(),t.bool()&&(n.unk4_0=t.bytes(9)),n.struct_272=t.bytes(t.u16(),3,21),t.bool()&&(n.struct_232=t.bytes(t.u16(),2,32)),n.unk8=t.u8(),t.bool()&&(n.unk1_0=t.u32(),n.struct_193=t.bytes(t.u16(),5,30),n.unk1_2=t.u32()),n.unk10=t.u32(),n.struct_234=t.bytes(t.u16(),3,7),n.struct_436=t.bytes(t.u16(),3,10),n.itemTint=t.bytes(t.u16(),5,14),n.unk14=t.u32(),n.struct_274=t.bytes(t.u16(),10,29),n.unk16=t.u32(),t.bool()&&(n.struct_786=Ki(t)),n}function zn(t){let n={};return n.isDead=t.bool(),n.npcId=t.u32(),n}function Ai(t){let n={};return n.struct_1=t.array(t.u16(),()=>{let e={};return e.unk1_0_0=t.u32(),e.struct_523=t.bytes(t.u16(),10),e},3),n.unk1=t.u32(),n.unk2=t.u8(),n.bossKillDataList=t.array(t.u16(),()=>zn(t),3),n.unk4=t.u8(),n}function wi(t){let n={};return n.struct_22=t.array(t.u16(),()=>{let e={};return e.unk1_0_0=t.u8(),e.struct_233=t.string(2),e.unk1_0_2=t.u16(),e},20),n.struct_234=t.bytes(t.u16(),3,7),n.unk2=t.u8(),n.struct_236=t.bytes(t.u16(),5,7),n.unk4=t.u8(),n.unk5=t.u8(),n}function Bi(t){let n={},e=t.u8();return e===1&&(n.struct_661=Ei(t)),e===2&&(n.struct_132=t.bytes(t.u16(),3,6),n.struct_2=t.array(t.u16(),()=>{let o={};return o.unk1_0_0=t.u32(),o.struct_523=t.bytes(t.u16(),10),o.unk1_0_2=t.u8(),o.unk1_0_3=t.u8(),o},3),n.unk2_2=t.u8()),e===3&&(n.unk3_0=t.bytes(26)),e===4&&(n.unk4_0=t.bytes(t.u16(),10,13),n.unk4_1=t.bytes(t.u16(),10,13),n.unk4_2=t.u32()),e===5&&(n.struct_660=Ri(t)),e===6&&(n.struct_605=Ai(t)),e===7&&(n.unk7_0=t.bytes(9)),e===8&&(n.struct_653=wi(t)),e===9&&(n.unk9_0=t.u8()),n}function Ci(t){let n={};return t.u32()>0&&(n.serialNumber=t.u64(),n.id=t.u32(),n.level=t.u16(),n.slot=t.u16(),n.durability=t.u32(),n.unk1_6_m=t.u32(),n.flag=t.u32(),n.expireTime=l(t),n.lockUpdateTime=l(t),t.bool()&&(n.unk1_10_0=t.bytes(9)),n.unk1_11=t.u8(),n.unk1_12=t.u8(),n.unk1_13=t.u32(),n.struct_560=Bi(t),n.unk1_15=t.u32()),n}function Ft(t){let n=new a(t),e={};return e.itemDataList=n.array(n.u16(),()=>Ci(n),80),e.storageType=n.u8(),e}var qt="PKTInitItem",Q=9176;function Mi(t){let n={};return t.bool()&&(n.unk1_0=t.bytes(9)),n.unk2=t.u32(),n.unk3=t.u32(),t.bool()&&(n.unk5_0=t.u32()),n.unk6=t.u32(),n}function Wt(t){let n=new a(t),e={};return e.struct_344=n.bytes(n.u16(),104,30),e.addonFeatureIdList=n.bytes(n.u16(),200,4),e.addonSkillFeatureList=n.array(n.u16(),()=>{let o={};return o.skillId=n.u32(),o.addonSkillFeatureIdList=n.array(n.u16(),()=>n.u32(),5),o},200),e.unk3=n.u8(),e.statusEffectDatas=n.array(n.u16(),()=>c(n),80),e.struct_420=n.array(n.u16(),()=>Mi(n),300),n.bool()&&(e.unk7_0=n.u32()),e.struct_135=n.bytes(n.u16(),353,48),e.unk9=n.u32(),e.unk10=n.u64(),e.unk11=n.u8(),e.abilityDataList=n.array(n.u16(),()=>L(n),100),e.unk13=n.u8(),e.unk14=n.u64(),e.struct_226=n.bytes(n.u16(),3,17),e.statPair=n.array(n.u16(),()=>{let o={};return o.value=i(n),o.statType=n.u8(),o},153),e}var Ot="PKTInitLocal",X=24890;function Ut(t){let n=new a(t),e={};return e.serverAddr=n.string(256),e.account_CharacterId1=n.u64(),e.unk2=n.u32(),e.account_CharacterId2=n.u64(),e}var Zt="PKTMigrationExecute",y=1461;function ji(t){let n={};return n.lostArkString=t.string(20),n.unk1=t.u8(),n.lookData=t.bytes(t.u32(),512),n.unk3=t.u64(),n.unk4=t.u8(),n.equipItemDataList=t.array(t.u16(),()=>T(t),33),n.unk6=t.u8(),n.unk7=t.u64(),n.unk8=t.u16(),n}function d(t,n=0){return t.u16()*(2*Math.PI)/65536}function S(t,n=0){t.u16(Math.round(n*65536/(2*Math.PI))%65536)}function zt(t){return t>>20===1?-((~t>>>0)+1&2097151):t}function r(t,n=0){let e=t.u64();return{x:zt(Number(e&0x1fffffn)),y:zt(Number(e>>21n&0x1fffffn)),z:zt(Number(e>>42n&0x1fffffn))}}function p(t,n={x:0,y:0,z:0}){t.u64(BigInt(Math.round(n.x??0)>>>0&2097151)|BigInt(Math.round(n.y??0)>>>0&2097151)<<21n|BigInt(Math.round(n.z??0)>>>0&2097151)<<42n)}function Vn(t){let n={};return n.objectId=t.u64(),n.unk1=t.u8(),t.bool()&&(n.unk3_0=t.u8()),t.bool()&&(n.unk5_0=t.u32()),n.statusEffectDatas=t.array(t.u16(),()=>c(t),80),t.bool()&&(n.unk8_0=t.u8()),t.bool()&&(n.balanceLevel=t.u16()),t.bool()&&(n.unk12_0=t.u8()),n.periodUpdateStatDataList=t.array(t.u16(),()=>A(t),5),n.unk14=t.u8(),n.unk15=t.u8(),t.bool()&&(n.struct_730=ji(t)),t.bool()&&(n.unk19_0=t.u64()),t.bool()&&(n.struct_341=t.bytes(t.u16(),11,9)),n.typeId=t.u32(),t.bool()&&(n.unk24_0=t.u8()),t.bool()&&(n.unk26_0=t.u16()),n.unk27=t.u8(),t.bool()&&(n.unk29_0=t.u8()),t.bool()&&(n.transitIndex=t.u32()),t.bool()&&(n.unk33_0=t.u8()),n.unk34=t.u8(),t.bool()&&(n.unk36_0=t.u32()),n.statPair=t.array(t.u16(),()=>{let e={};return e.value=i(t),e.statType=t.u8(),e},153),n.level=t.u16(),n.directionYaw=d(t),n.position=r(t),t.bool()&&(n.struct_273=t.bytes(t.u16(),12,12)),t.bool()&&(n.unk44_0=t.u8()),n.spawnIndex=t.u32(),t.bool()&&(n.unk47_0=t.u32()),t.bool()&&(n.unk49_0=t.u32()),n.unk50=t.u8(),n}function Vt(t){let n=new a(t),e={};return n.bool()&&(e.unk1_0=n.u8()),e.unk2=n.u8(),n.bool()&&(e.unk1_0_0=n.string(20),e.unk1_1=n.string(20)),n.bool()&&(e.unk5_0=n.u64()),e.npcStruct=Vn(n),e}var Ht="PKTNewNpc",g=59333;function Gt(t){let n=new a(t),e={};return e.publishReason=n.u8(),e.npcData=Vn(n),e.ownerId=n.u64(),n.skip(35),e}var Yt="PKTNewNpcSummon",nn=47111;function qi(t){let n={};return t.bool()&&(n.unk1_0=t.bytes(12)),n.unk2=t.bytes(12),n.unk3=t.u32(),n.unk4=t.u32(),n}function Wi(t){let n={};return n.unk45_m=t.u32(),n.periodUpdateStatDataList=t.array(t.u16(),()=>A(t),5),n.statPair=t.array(t.u16(),()=>{let e={};return e.value=i(t),e.statType=t.u8(),e},153),n.maxItemLevel=t.f32(),n.characterId=t.u64(),t.bool()&&(n.grabbedData=t.bytes(12)),n.heading=d(t),n.unk1_m=t.u8(),n.name=t.string(20),n.statusEffectDatas=t.array(t.u16(),()=>c(t),80),n.position=r(t),n.avgItemLevel=t.f32(),n.petId=t.u32(),n.unk25_m=t.u8(),n.unk4_m=t.u32(),n.unk2_m=t.u8(),n.equipItemDataList=t.array(t.u16(),()=>T(t),33),n.unk17_m=t.u8(),n.equipLifeToolDataList=t.array(t.u16(),()=>T(t),9),n.secondHonorTitleId=t.u16(),n.unk21=t.u64(),n.unk7_m=t.u32(),n.unk32_m=t.u8(),n.lookData=t.bytes(t.u32(),512),n.unk0_m=t.bytes(5),n.worldId=t.u8(),n.guildId=t.u64(),n.firstHonorTitleId=t.u16(),n.avatarHide=t.u8(),n.unk30=t.u32(),n.addonFeatureIdList=t.bytes(t.u16(),200,4),n.unk29_m=t.u8(),n.unk23_m=t.u8(),n.rvRLevel=t.u16(),n.unk35=t.u32(),n.guildName=t.string(20),n.addonSkillFeatureList=t.array(t.u16(),()=>{let e={};return e.skillId=t.u32(),e.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),e},200),n.unk38=t.u32(),n.unk5_m=t.u32(),n.unk40=t.u8(),n.unk41=t.u8(),n.unk42=t.u8(),n.classId=t.u16(),n.level=t.u16(),n.identityData=t.bytes(25),n.playerId=t.u64(),n}function $t(t){let n=new a(t),e={};return n.bool()&&(e.unk5_0_m=n.bytes(20)),n.bool()&&(e.unk3_0_m=n.u32()),n.bool()&&(e.trackMoveInfo=qi(n)),n.bool()&&(e.unk4_0_m=n.bytes(12)),n.bool()&&(e.struct_59=n.array(n.u16(),()=>{let o={};return o.itemTint=n.bytes(n.u16(),5,14),o.unk1_0_1=n.u32(),o.unk1_0_2=n.u64(),o},5)),e.unk2_m=n.u8(),e.pcStruct=Wi(n),n.bool()&&(e.unk1_0=n.u32(),e.itemTint=n.bytes(n.u16(),5,14),e.unk1_2=n.u64()),e.unk0_m=n.u8(),e}var Jt="PKTNewPC",tn=33762;function B(t,n=0){return{first:t.u16(),second:t.u16(),third:t.u16()}}function Hn(t,n){t.u16(n.first),t.u16(n.second),t.u16(n.third)}function C(t,n=0){return{first:t.u8(),second:t.u8(),third:t.u8()}}function Gn(t,n){t.u8(n.first),t.u8(n.second),t.u8(n.third)}function Oi(t){let n={};return n.unk0=t.u32(),n.unk1=t.u16(),t.bool()&&(n.unk3_0=t.u32()),n.unk4=t.u8(),n.targetObjectId=t.u64(),n.unk6=t.u32(),n.unk7=t.u64(),n.ownerId=t.u64(),n.chainSkillEffect=t.u32(),n.unk10=t.u8(),n.unk11=t.u64(),n.tripodLevel=B(t),n.skillId=t.u32(),n.projectileId=t.u64(),n.unk15=t.u16(),t.bool()&&(n.unk17_0=t.u64()),n.unk18=t.u32(),n.skillEffect=t.u32(),n.skillLevel=t.u8(),t.bool()&&(n.struct_341=t.bytes(t.u16(),11,9)),n.tripodIndex=C(t),n}function yt(t){let n=new a(t),e={};return e.projectileInfo=Oi(n),e}var gt="PKTNewProjectile",en=25491;function Ui(t){let n={};return n.skillEffect=t.u32(),n.unk1=t.u8(),n.position=r(t),n.unk3=t.u8(),n.objectId=t.u64(),n.skillId=t.u32(),n.unk6=t.u32(),n.unk7=t.u8(),n.ownerId=t.u64(),n.unk9=t.u32(),t.bool()&&(n.struct_341=t.bytes(t.u16(),11,9)),n.unk12=t.u32(),n.unk13=t.u16(),n}function ne(t){let n=new a(t),e={};return e.unk0=n.u8(),e.trapData=Ui(n),e.unk2=n.u8(),e}var te="PKTNewTrap",on=59491;function ee(t){let n=new a(t),e={};return e.decreasePoint=n.u32(),e.hitCheckTime=n.u32(),e.noHitCheckTime=n.u32(),n.skip(1),e.objectId=n.u64(),e.paralyzationMaxPoint=n.u32(),n.skip(1),e.enable=n.bool(),e.paralyzationPoint=n.u32(),n.skip(1),e}var oe="PKTParalyzationStateNotify",an=33543;function Zi(t){let n={};return n.name=t.string(20),n.worldId=t.u8(),n.auths=t.u8(),n.position=r(t),n.zoneInstId=t.u64(),n.classId=t.u16(),n.unk6=t.u8(),n.transitIndex=t.u32(),n.unk8=t.u16(),n.unk9=t.u8(),n.unk10=t.u8(),n.unk11=t.u8(),n.maxHp=i(t),n.partyMemberNumber=t.u8(),n.gearLevel=t.f32(),n.unk15=t.u8(),n.curHp=i(t),n.characterId=t.u64(),n.zoneId=t.u32(),n.characterLevel=t.u16(),n}function ae(t){let n=new a(t),e={};return e.memberDatas=n.array(n.u16(),()=>Zi(n),40),e.partyLootType=n.u8(),e.lootGrade=n.u32(),e.partyType=n.u8(),e.raidInstanceId=n.u32(),e.partyInstanceId=n.u32(),e}var ue="PKTPartyInfo",un=59330;function ie(t){let n=new a(t),e={};return e.name=n.string(20),e.partyInstanceId=n.u32(),e.partyLeaveType=n.u8(),e}var re="PKTPartyLeaveResult",rn=43463;function se(t){let n=new a(t),e={};return e.objectId=n.u64(),e.unk0_m=n.u8(),e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var _e="PKTPartyPassiveStatusEffectAddNotify",sn=47487;function me(t){let n=new a(t),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e.objectId=n.u64(),e}var fe="PKTPartyPassiveStatusEffectRemoveNotify",_n=12028;function le(t){let n=new a(t),e={};return e.statusEffectDatas=n.array(n.u16(),()=>c(n),80),e.playerIdOnRefresh=n.u64(),e.unk2=n.u8(),e.characterId=n.u64(),e.unk4=n.u64(),e}var de="PKTPartyStatusEffectAddNotify",mn=25859;function pe(t){let n=new a(t),e={};return e.unk0=n.u64(),e.characterId=n.u64(),e.statusEffectIds=n.array(n.u16(),()=>n.u32(),80),e.reason=n.u8(),e}var ce="PKTPartyStatusEffectRemoveNotify",fn=20302;function be(t){let n=new a(t),e={};return n.skip(14),e.raidInstanceId=n.u32(),n.skip(13),e.characterId=n.u64(),n.skip(1),e.partyInstanceId=n.u32(),e}var ke="PKTPartyStatusEffectResultNotify",ln=16085;function xe(t){let n=new a(t),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var Pe="PKTPassiveStatusEffectAddNotify",dn=7138;function Te(t){let n=new a(t),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var Se="PKTPassiveStatusEffectRemoveNotify",pn=2648;function Ne(t){let n=new a(t),e={};return e.raidResult=n.u8(),e.totalTime=n.u64(),e.unk1_m=n.bool(),e.unk4_m=n.u64(),e.endTick=n.u64(),e.unk11_m=n.bool(),e.unk6_m=n.u64(),e.unk0_m=n.bool(),e.braveHeartCount=n.u8(),e.initBraveHeartCount=n.u8(),e.bossKillDataList=n.array(n.u16(),()=>zn(n),3),e.unk5_m=n.u64(),e.startTick=n.u64(),e.raidId=n.u32(),e}var ve="PKTRaidBegin",cn=49450;function he(t){let n=new a(t),e={};return e.unk0=n.bytes(6),e}var Ie="PKTRaidBossKillNotify",bn=20341;function Ee(t){let n=new a(t),e={};return e.struct_49=n.array(n.u16(),()=>{let o={};return o.unk1_0_0=i(n),o.unk1_0_1=n.u32(),o.unk1_0_2=i(n),o.struct_529=n.bytes(n.u16(),3),o},3),e.unk1=n.u64(),e.unk2=n.u64(),e.unk3=n.u8(),e.unk4=n.u8(),e.unk5=n.u64(),e.raidResult=n.u8(),e.unk7=n.u64(),e}var De="PKTRaidResult",kn=23056;function zi(t){let n={};return n.objectId=t.u64(),n.unpublishReason=t.u8(),n}function Ke(t){let n=new a(t),e={};return e.unpublishedObjects=n.array(n.u16(),()=>zi(n),200),e}var Re="PKTRemoveObject",xn=46115;function Le(t){let n=new a(t),e={};return e.skillLevel=n.u8(),e.skillId=n.u32(),n.skip(2),e.caster=n.u64(),e}var Ae="PKTSkillCastNotify",Pn=56741;function Yn(t){let n={};return n.maxHp=i(t),n.curHp=i(t),t.bool()&&(n.damageAttr=t.u8()),n.damage=i(t),n.unk3_m=t.u16(),n.modifier=t.u8(),n.targetId=t.u64(),n.damageType=t.u8(),n}function $n(t,n=0){let e={},o=t.u8();return o&1&&(e.moveTime=t.u32()),o&2&&(e.standUpTime=t.u32()),o&4&&(e.downTime=t.u32()),o&8&&(e.freezeTime=t.u32()),o&16&&(e.moveHeight=t.u32()),o&32&&(e.farmostDist=t.u32()),o&64&&(e.flag40=t.bytes(t.u16(),6)),e}function Hi(t,n){let e=(n.moveTime===void 0?0:1)|(n.standUpTime===void 0?0:2)|(n.downTime===void 0?0:4)|(n.freezeTime===void 0?0:8)|(n.moveHeight===void 0?0:16)|(n.farmostDist===void 0?0:32)|(n.flag40===void 0?0:64);t.u8(e),e&1&&t.u32(n.moveTime),e&2&&t.u32(n.standUpTime),e&4&&t.u32(n.downTime),e&8&&t.u32(n.freezeTime),e&16&&t.u32(n.moveHeight),e&32&&t.u32(n.farmostDist),e&64&&t.bytes(n.flag40,{maxLen:6,lenType:"u16"})}function Yi(t){let n={};return n.unk2_m=t.u64(),n.skillDamageEvent=Yn(t),n.unk8_m=t.u16(),n.destination=r(t),n.unk4_m=t.u16(),n.skillMoveOptionData=$n(t),n.unk1_m=t.u8(),n.unk3_m=t.u16(),n.position=r(t),n}function we(t){let n=new a(t),e={};return e.skillEffectId=n.u32(),e.skillDamageAbnormalMoveEvents=n.array(n.u16(),()=>Yi(n),50),e.unk1_m=n.u8(),e.unk2_m=n.u32(),e.skillId=n.u32(),e.sourceId=n.u64(),e}var Be="PKTSkillDamageAbnormalMoveNotify",Tn=42318;function Ce(t){let n=new a(t),e={};return n.bool()&&(e.unk1_0=n.u32()),e.sourceId=n.u64(),e.skillLevel=n.u8(),n.bool()&&(e.skillEffectId=n.u32()),e.skillId=n.u32(),e.skillDamageEvents=n.array(n.u16(),()=>Yn(n),50),e}var Me="PKTSkillDamageNotify",Sn=20086;function je(t){let n=new a(t),e={};return n.skip(8),e.skillId=n.u32(),e.sourceId=n.u64(),n.skip(6),e.stage=n.u8(),n.skip(25),e}var Fe="PKTSkillStageNotify",Nn=30803;function Jn(t,n=0){let e={},o=t.u8();return o&1&&(e.layerIndex=t.u8()),o&2&&(e.startStageIndex=t.u8()),o&4&&(e.transitIndex=t.u32()),o&8&&(e.stageStartTime=t.u32()),o&16&&(e.farmostDistance=t.u32()),o&32&&(e.tripodIndex=C(t)),o&64&&(e.tripodLevel=B(t)),e}function $i(t,n){let e=(n.layerIndex===void 0?0:1)|(n.startStageIndex===void 0?0:2)|(n.transitIndex===void 0?0:4)|(n.stageStartTime===void 0?0:8)|(n.farmostDistance===void 0?0:16)|(n.tripodIndex===void 0?0:32)|(n.tripodLevel===void 0?0:64);t.u8(e),e&1&&t.u8(n.layerIndex),e&2&&t.u8(n.startStageIndex),e&4&&t.u32(n.transitIndex),e&8&&t.u32(n.stageStartTime),e&16&&t.u32(n.farmostDistance),e&32&&Gn(t,n.tripodIndex),e&64&&Hn(t,n.tripodLevel)}function qe(t){let n=new a(t),e={};return e.aimTargetPosition=r(n),e.curPosition=r(n),e.sourceId=n.u64(),e.skillLevel=n.u8(),e.skillOptionData=Jn(n),n.bool()&&(e.aiStateId=n.u32()),e.curDirectionYaw=d(n),n.bool()&&(e.unk1_m=n.u32()),e.newPosition=r(n),e.skillId=n.u32(),n.bool()&&(e.pitchRotation=d(n)),e.newDirectionYaw=d(n),e}var We="PKTSkillStartNotify",vn=110;function Oe(t){let n=new a(t),e={};return e.statPairList=n.array(n.u16(),()=>{let o={};return o.value=i(n),o.statType=n.u8(),o},153),e.objectId=n.u64(),n.bool()&&(e.unk3_0=n.u32()),e.unk4=n.array(n.u16(),()=>{let o={};return o.value=i(n),o.statType=n.u8(),o},153),e.unk5=n.u8(),e}var Ue="PKTStatChangeOriginNotify",Ze=2349;function ze(t){let n=new a(t),e={};return n.bool()&&(e.unk1_0=n.u64()),e.new=n.bool(),e.statusEffectData=c(n),e.objectId=n.u64(),e.unk5=n.u64(),e}var Ve="PKTStatusEffectAddNotify",hn=33978;function He(t){let n=new a(t),e={};return e.reason=n.u8(),e.objectId=n.u64(),e.statusEffectIds=n.array(n.u16(),()=>n.u32(),80),e}var Ge="PKTStatusEffectRemoveNotify",In=22672;function Ye(t){let n=new a(t),e={};return e.effectInstanceId=n.u32(),n.skip(1),e.expirationTick=n.u64(),e.targetId=n.u64(),n.skip(1),e}var $e="PKTStatusEffectDurationNotify",En=19054;function Je(t){let n=new a(t),e={};return n.skip(2),e.effectInstanceId=n.u32(),e.characterId=n.u64(),e.value=n.u32(),n.skip(4),e.objectId=n.u64(),e}var Qe="PKTStatusEffectSyncDataNotify",Dn=33630;function Xe(t){let n=new a(t),e={};return e.triggerId=n.u32(),e.step=n.u32(),n.skip(2),e.unk2_m=n.bool(),e}var ye="PKTTriggerBossBattleStatus",Kn=6420;function ge(t){let n=new a(t),e={};return e.unk0_m=n.u32(),e.packetResultCode=n.u32(),e.triggerId=n.u32(),e.involvedPCs=n.array(n.u16(),()=>n.u64(),40),e}var no="PKTTriggerFinishNotify",Rn=38704;function to(t){let n=new a(t),e={};return e.sourceId=n.u64(),e.triggerSignalType=n.u32(),e.involvedPCs=n.array(n.u16(),()=>n.u64(),40),e.triggerId=n.u32(),e}var eo="PKTTriggerStartNotify",Ln=20231;function oo(t){let n=new a(t),e={};return e.unk0_m=n.u32(),e.characterId=n.u64(),e.maxHp=i(n),e.curHp=i(n),e.position=n.u64(),e.statusEffectDatas=n.array(n.u16(),()=>c(n),80),e}var ao="PKTTroopMemberUpdateMinNotify",An=44092;function uo(t){let n=new a(t),e={};return e.playerId=n.u64(),e.identityGauge1=n.u32(),e.identityGauge2=n.u32(),e.identityGauge3=n.u32(),n.skip(2),e}var io="PKTIdentityGaugeChangeNotify",wn=19646;function ro(t){let n=new a(t),e={};return e.totalMembers=n.array(n.u16(),()=>n.u64(),40),e.zoneInstId=n.u64(),e.loadComplete=n.bool(),e.completeMembers=n.array(n.u16(),()=>n.u64(),40),e.zoneId=n.u32(),e.zoneLevel=n.u8(),e.firstPCEnterTick=n.u64(),e}var so="PKTZoneMemberLoadStatusNotify",Bn=14585;function _o(t){let n=new a(t),e={};return n.skip(1),e.objectId=n.u64(),n.skip(1),e}var mo="PKTZoneObjectUnpublishNotify",Cn=43137;function Qi(t){let n={};return n.instanceId=t.u32(),t.skip(4),n.stackCount=t.u8(),n.id=t.u32(),n.target=t.u8(),n}function fo(t){let n=new a(t),e={};return e.zoneStatusEffectDataList=n.array(n.u16(),()=>Qi(n),4),e}var lo="PKTZoneStatusEffectAddNotify",Mn=7747;function po(t){let n=new a(t),e={};return n.skip(3),e.statusEffectId=n.u32(),e}var co="PKTZoneStatusEffectRemoveNotify",jn=35401;var bo=new Map([[q,[_t,st]],[W,[ft,mt]],[O,[dt,lt]],[bt,[ct,pt]],[U,[xt,kt]],[Z,[Tt,Pt]],[z,[Nt,St]],[V,[It,ht]],[H,[Dt,Et]],[G,[Rt,Kt]],[Y,[At,Lt]],[$,[Bt,wt]],[J,[jt,Mt]],[Q,[qt,Ft]],[X,[Ot,Wt]],[y,[Zt,Ut]],[g,[Ht,Vt]],[nn,[Yt,Gt]],[tn,[Jt,$t]],[en,[gt,yt]],[on,[te,ne]],[an,[oe,ee]],[un,[ue,ae]],[rn,[re,ie]],[sn,[_e,se]],[_n,[fe,me]],[mn,[de,le]],[fn,[ce,pe]],[ln,[ke,be]],[dn,[Pe,xe]],[pn,[Se,Te]],[cn,[ve,Ne]],[bn,[Ie,he]],[kn,[De,Ee]],[xn,[Re,Ke]],[Pn,[Ae,Le]],[Tn,[Be,we]],[Sn,[Me,Ce]],[Nn,[Fe,je]],[vn,[We,qe]],[Ze,[Ue,Oe]],[hn,[Ve,ze]],[In,[Ge,He]],[En,[$e,Ye]],[Dn,[Qe,Je]],[Kn,[ye,Xe]],[Rn,[no,ge]],[Ln,[eo,to]],[An,[ao,oo]],[wn,[io,uo]],[Bn,[so,ro]],[Cn,[mo,_o]],[Mn,[lo,fo]],[jn,[co,po]]]);var yi=new Map([[q,[0]],[W,[1]],[O,[2]],[U,[4]],[Z,[5]],[z,[6]],[Y,[7]],[$,[8]],[J,[9]],[X,[10]],[y,[11]],[g,[12]],[nn,[13]],[tn,[14]],[en,[15]],[an,[16]],[un,[17]],[rn,[18]],[sn,[19]],[_n,[20]],[mn,[21]],[fn,[22]],[ln,[23]],[dn,[24]],[pn,[25]],[bn,[26]],[kn,[27]],[xn,[28]],[Tn,[29]],[Sn,[30]],[Nn,[31]],[vn,[32]],[hn,[34]],[In,[35]],[En,[36]],[Dn,[37]],[Kn,[38]],[Rn,[39]],[Ln,[40]],[An,[41]],[wn,[42]],[Cn,[43]],[Mn,[44]],[jn,[45]],[Pn,[46]],[G,[47]],[V,[48]],[H,[49]],[Q,[50]],[cn,[52]],[Bn,[51]],[on,[53]]]);function M(t,n){let e={};return e.points=t.u16(),e.id=t.u32(),e.level=t.u8(),e}function j(t,n){t.u16(n.points),t.u32(n.id),t.u8(n.level)}function xo(t,n){let e={};return e.abilityDataList=t.array(t.u16(),()=>M(t,n),100),e}function Po(t,n){t.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(t,e)})}var To="AbilityChangeNotify";function gi(t,n){let e={};return e.featureType=t.u16(),e.level=t.u32(),e}function nr(t,n){t.u16(n.featureType),t.u32(n.level)}function So(t,n){let e={};return e.activeAbilityList=t.array(t.u16(),()=>gi(t,n),60),e.objectId=t.u64(),e}function No(t,n){t.array(n.activeAbilityList,{maxLen:60,lenType:"u16"},e=>{nr(t,e)}),t.u64(n.objectId)}var vo="ActiveAbilityNotify";function ho(t,n){let e={};return e.objectId=t.u64(),e.addonSkillFeatureList=t.array(t.u16(),()=>{let o={};return o.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),o.skillId=t.u32(),o},200),e}function Io(t,n){t.u64(n.objectId),t.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{t.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},o=>{t.u32(o)}),t.u32(e.skillId)})}var Eo="AddonSkillFeatureChangeNotify";function Do(t,n){let e={};return e.paralyzationMaxPoint=t.u32(),e.type=t.u8(),e.objectId=t.u64(),e.paralyzationPoint=t.u32(),e}function Ko(t,n){t.u32(n.paralyzationMaxPoint),t.u8(n.type),t.u64(n.objectId),t.u32(n.paralyzationPoint)}var Ro="BlockSkillStateNotify";function Lo(t,n){let e={};return e.sourceId=t.u64(),e.targetId=t.u64(),e.type=t.u32(),e}function Ao(t,n){t.u64(n.sourceId),t.u64(n.targetId),t.u32(n.type)}var wo="CounterAttackNotify";function Bo(t,n){let e={};return e.sourceId=t.u64(),e.targetId=t.u64(),e}function Co(t,n){t.u64(n.sourceId),t.u64(n.targetId)}var Mo="DeathNotify";function jo(t,n){let e={};return e.abilityDataList=t.array(t.u16(),()=>M(t,n),100),e}function Fo(t,n){t.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(t,e)})}var qo="InitAbility";function Wo(t,n){let e={};return e.playerId=t.u64(),e}function Oo(t,n){t.u64(n.playerId)}var Uo="InitEnv";function b(t,n){let e={};return e.skillLevel=t.u8(),e.occurTime=l(t,n),e.statusEffectId=t.u32(),e.sourceId=t.u64(),e.totalTime=t.f32(),e.endTick=t.u64(),t.bool()&&(e.value=t.bytes(16)),e.effectInstanceId=t.u32(),n>=1?e.stackCount=t.u8():e.stackCount=1,e}function k(t,n){t.u8(n.skillLevel),v(t,n.occurTime),t.u32(n.statusEffectId),t.u64(n.sourceId),t.f32(n.totalTime),t.u64(n.endTick),t.bool(n.value!==void 0)&&t.bytes(n.value,{length:16}),t.u32(n.effectInstanceId),t.u8(n.stackCount)}function Zo(t,n){let e={};return e.statPair=t.array(t.u16(),()=>{let o={};return o.StatType=t.u8(),o.Value=i(t,n),o},152),e.name=t.string(20),e.level=t.u16(),e.statusEffectDatas=t.array(t.u16(),()=>b(t,n),80),e.characterId=t.u64(),e.gearLevel=t.f32(),e.playerId=t.u64(),e.classId=t.u16(),e}function zo(t,n){t.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{t.u8(e.statType),m(t,e.value)}),t.string(n.name,20),t.u16(n.level),t.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{k(t,e)}),t.u64(n.characterId),t.f32(n.gearLevel),t.u64(n.playerId),t.u16(n.classId)}var Vo="InitPC";function Ho(t,n){let e={};return e.statPair=t.array(t.u16(),()=>{let o={};return o.statType=t.u8(),o.value=i(t,n),o},152),e.statusEffectDatas=t.array(t.u16(),()=>b(t,n),80),e.addonSkillFeatureList=t.array(t.u16(),()=>{let o={};return o.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),o.skillId=t.u32(),o},200),e.abilityDataList=t.array(t.u16(),()=>M(t,n),100),e}function Go(t,n){t.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{t.u8(e.statType),m(t,e.value)}),t.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{k(t,e)}),t.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{t.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},o=>{t.u32(o)}),t.u32(e.skillId)}),t.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(t,e)})}var Yo="InitLocal";function $o(t,n){let e={};return e.account_CharacterId1=t.u64(),e.serverAddr=t.string(256),e.account_CharacterId2=t.u64(),e}function Jo(t,n){t.u64(n.account_CharacterId1),t.string(n.serverAddr,256),t.u64(n.account_CharacterId2)}var Qo="MigrationExecute";function Qn(t,n){let e={};return e.spawnIndex=t.u32(),e.objectId=t.u64(),t.bool()&&(e.transitIndex=t.u32()),e.position=r(t,n),e.statusEffectDatas=t.array(t.u16(),()=>b(t,n),80),e.directionYaw=d(t,n),e.statPair=t.array(t.u16(),()=>{let o={};return o.statType=t.u8(),o.value=i(t,n),o},152),e.typeId=t.u32(),n>=1?(e.level=t.u16(),t.bool()&&(e.balanceLevel=t.u16())):e.level=0,e}function Xn(t,n){t.u32(n.spawnIndex),t.u64(n.objectId),t.bool(n.transitIndex!==void 0)&&t.u32(n.transitIndex),p(t,n.position),t.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{k(t,e)}),S(t,n.directionYaw),t.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{t.u8(e.statType),m(t,e.value)}),t.u32(n.typeId),t.u16(n.level),t.bool(n.balanceLevel!==void 0)&&t.u16(n.balanceLevel)}function Xo(t,n){let e={};return e.npcStruct=Qn(t,n),e}function yo(t,n){Xn(t,n.npcStruct)}var go="NewNpc";function na(t,n){let e={};return e.publishReason=t.u8(),e.ownerId=t.u64(),e.npcData=Qn(t,n),e}function ta(t,n){t.u8(n.publishReason),t.u64(n.ownerId),Xn(t,n.npcData)}var ea="NewNpcSummon";function D(t,n){let e={};return e.slot=t.u16(),e.level=t.u16(),e.itemTint=t.bytes(t.u16(),3,14),e.expireTime=l(t),e.id=t.u32(),e}function K(t,n){t.u16(n.slot),t.u16(n.level),t.bytes(n.itemTint,{maxLen:3,lenType:"u16",multiplier:14}),v(t,n.expireTime),t.u32(n.id)}function er(t,n){let e={};return e.maxItemLevel=t.f32(),e.statPair=t.array(t.u16(),()=>{let o={};return o.statType=t.u8(),o.value=i(t,n),o},152),e.name=t.string(20),e.heading=d(t,n),e.characterId=t.u64(),e.playerId=t.u64(),e.addonSkillFeatureList=t.array(t.u16(),()=>{let o={};return o.addonSkillFeatureIdList=t.array(t.u16(),()=>t.u32(),5),o.SkillId=t.u32(),o},200),e.classId=t.u16(),e.level=t.u16(),e.statusEffectDatas=t.array(t.u16(),()=>b(t,n),80),n>=1?(e.avgItemLevel=t.f32(),e.position=r(t),e.equipItemDataList=t.array(t.u16(),()=>D(t,n),32),e.equipLifeToolDataList=t.array(t.u16(),()=>D(t,n),9),e.guildName=t.string(20),n>=2?e.guildId=t.u64():e.guildId=BigInt(t.u32())):(e.avgItemLevel=e.maxItemLevel,e.position={x:0,y:0,z:0},e.equipItemDataList=[],e.equipLifeToolDataList=[],e.guildName="",e.guildId=0n),e}function or(t,n){t.f32(n.maxItemLevel),t.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{t.u8(e.statType),m(t,e.value)}),t.string(n.name,20),S(t,n.heading),t.u64(n.characterId),t.u64(n.playerId),t.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{t.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},o=>{t.u32(o)}),t.u32(e.skillId)}),t.u16(n.classId),t.u16(n.level),t.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{k(t,e)}),t.f32(n.avgItemLevel),p(t,n.position),t.array(n.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{K(t,e)}),t.array(n.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{K(t,e)}),t.string(n.guildName,20),t.u64(n.guildId)}function aa(t,n){let e={};return e.pcStruct=er(t,n),e}function ua(t,n){or(t,n.pcStruct)}var ia="NewPC";function ar(t,n){let e={};return e.tripodIndex=C(t,n),e.chainSkillEffect=t.u32(),e.skillEffect=t.u32(),e.skillId=t.u32(),e.targetObjectId=t.u64(),e.ownerId=t.u64(),e.skillLevel=t.u8(),e.projectileId=t.u64(),e.tripodLevel=B(t,n),e}function ur(t,n){Gn(t,n.tripodIndex),t.u32(n.chainSkillEffect),t.u32(n.skillEffect),t.u32(n.skillId),t.u64(n.targetObjectId),t.u64(n.ownerId),t.u8(n.skillLevel),t.u64(n.projectileId),Hn(t,n.tripodLevel)}function ra(t,n){let e={};return e.projectileInfo=ar(t,n),e}function sa(t,n){ur(t,n.projectileInfo)}var _a="NewProjectile";function ma(t,n){let e={};return e.enable=t.bool(),e.paralyzationPoint=t.u32(),e.decreasePoint=t.u32(),e.paralyzationMaxPoint=t.u32(),e.noHitCheckTime=t.u32(),e.hitCheckTime=t.u32(),e.objectId=t.u64(),e}function fa(t,n){t.bool(n.enable),t.u32(n.paralyzationPoint),t.u32(n.decreasePoint),t.u32(n.paralyzationMaxPoint),t.u32(n.noHitCheckTime),t.u32(n.hitCheckTime),t.u64(n.objectId)}var la="ParalyzationStateNotify";function ir(t,n){let e={};return e.maxHp=i(t,n),e.characterId=t.u64(),e.position=r(t,n),e.transitIndex=t.u32(),e.curHp=i(t,n),e.characterLevel=t.u16(),e.gearLevel=t.f32(),e.zoneId=t.u32(),e.partyMemberNumber=t.u8(),e.name=t.string(20),e.zoneInstId=t.u64(),e.worldId=t.u8(),e.classId=t.u16(),e.auths=t.u8(),e}function rr(t,n){m(t,n.maxHp),t.u64(n.characterId),p(t,n.position),t.u32(n.transitIndex),m(t,n.curHp),t.u16(n.characterLevel),t.f32(n.gearLevel),t.u32(n.zoneId),t.u8(n.partyMemberNumber),t.string(n.name,20),t.u64(n.zoneInstId),t.u8(n.worldId),t.u16(n.classId),t.u8(n.auths)}function da(t,n){let e={};return e.raidInstanceId=t.u32(),e.lootGrade=t.u32(),e.partyType=t.u8(),e.partyInstanceId=t.u32(),e.partyLootType=t.u8(),e.memberDatas=t.array(t.u16(),()=>ir(t,n),40),e}function pa(t,n){t.u32(n.raidInstanceId),t.u32(n.lootGrade),t.u8(n.partyType),t.u32(n.partyInstanceId),t.u8(n.partyLootType),t.array(n.memberDatas,{maxLen:40,lenType:"u16"},e=>{rr(t,e)})}var ca="PartyInfo";function ba(t,n){let e={};return e.partyLeaveType=t.u8(),e.partyInstanceId=t.u32(),e.name=t.string(20),e}function ka(t,n){t.u8(n.partyLeaveType),t.u32(n.partyInstanceId),t.string(n.name,20)}var xa="PartyLeaveResult";function Pa(t,n){let e={};return e.objectId=t.u64(),e.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),e.unk0_m=t.u8(),e}function Ta(t,n){t.u64(n.objectId),t.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{t.u32(e)}),t.u8(n.unk0_m)}var Sa="PartyPassiveStatusEffectAddNotify";function Na(t,n){let e={};return e.objectId=t.u64(),e.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),e}function va(t,n){t.u64(n.objectId),t.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{t.u32(e)})}var ha="PartyPassiveStatusEffectRemoveNotify";function Ia(t,n){let e={};return e.characterId=t.u64(),e.statusEffectDatas=t.array(t.u16(),()=>b(t,n),80),e.playerIdOnRefresh=t.u64(),e}function Ea(t,n){t.u64(n.characterId),t.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{k(t,e)}),t.u64(n.playerIdOnRefresh)}var Da="PartyStatusEffectAddNotify";function Ka(t,n){let e={};return e.characterId=t.u64(),e.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),e.reason=t.u8(),e}function Ra(t,n){t.u64(n.characterId),t.array(n.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{t.u32(e)}),t.u8(n.reason)}var La="PartyStatusEffectRemoveNotify";function Aa(t,n){let e={};return e.partyInstanceId=t.u32(),e.raidInstanceId=t.u32(),e.characterId=t.u64(),e}function wa(t,n){t.u32(n.partyInstanceId),t.u32(n.raidInstanceId),t.u64(n.characterId)}var Ba="PartyStatusEffectResultNotify";function Ca(t,n){let e={};return e.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),e}function Ma(t,n){t.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{t.u32(e)})}var ja="PassiveStatusEffectAddNotify";function Fa(t,n){let e={};return e.passiveStatusEffectList=t.array(t.u16(),()=>t.u32(),10),e}function qa(t,n){t.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{t.u32(e)})}var Wa="PassiveStatusEffectRemoveNotify";function Oa(t,n){return{}}function Ua(t,n){}var Za="RaidBossKillNotify";function za(t,n){let e={};return n>=3?e.raidResult=t.u8():e.raidResult=0,e}function Va(t,n){t.u8(n.raidResult)}var Ha="RaidResult";function sr(t,n){let e={};return e.unpublishReason=t.u8(),e.objectId=t.u64(),e}function _r(t,n){t.u8(n.unpublishReason),t.u64(n.objectId)}function Ga(t,n){let e={};return e.unpublishedObjects=t.array(t.u16(),()=>sr(t,n),200),e}function Ya(t,n){t.array(n.unpublishedObjects,{maxLen:200,lenType:"u16"},e=>{_r(t,e)})}var $a="RemoveObject";function yn(t,n){let e={};return e.modifier=t.u8(),e.targetId=t.u64(),e.damageType=t.u8(),t.bool()&&(e.damageAttr=t.u8()),e.curHp=i(t,n),e.unk3_m=t.u16(),e.maxHp=i(t,n),e.damage=i(t,n),e}function gn(t,n){t.u8(n.modifier),t.u64(n.targetId),t.u8(n.damageType),t.bool(n.damageAttr!==void 0)&&t.u8(n.damageAttr),m(t,n.curHp),t.u16(n.unk3_m),m(t,n.maxHp),m(t,n.damage)}function fr(t,n){let e={};return e.skillMoveOptionData=$n(t,n),e.destination=r(t,n),e.position=r(t,n),e.skillDamageEvent=yn(t,n),e}function lr(t,n){Hi(t,n.skillMoveOptionData),p(t,n.destination),p(t,n.position),gn(t,n.skillDamageEvent)}function Ja(t,n){let e={};return e.skillId=t.u32(),e.skillDamageAbnormalMoveEvents=t.array(t.u16(),()=>fr(t,n),50),e.skillEffectId=t.u32(),e.sourceId=t.u64(),e}function Qa(t,n){t.u32(n.skillId),t.array(n.skillDamageAbnormalMoveEvents,{maxLen:50,lenType:"u16"},e=>{lr(t,e)}),t.u32(n.skillEffectId),t.u64(n.sourceId)}var Xa="SkillDamageAbnormalMoveNotify";function ya(t,n){let e={};return e.skillLevel=t.u8(),e.sourceId=t.u64(),e.skillId=t.u32(),e.skillDamageEvents=t.array(t.u16(),()=>yn(t,n),50),e.skillEffectId=t.u32(),e}function ga(t,n){t.u8(n.skillLevel),t.u64(n.sourceId),t.u32(n.skillId),t.array(n.skillDamageEvents,{maxLen:50,lenType:"u16"},e=>{gn(t,e)}),t.u32(n.skillEffectId??0)}var nu="SkillDamageNotify";function tu(t,n){let e={};return e.sourceId=t.u64(),e.skillId=t.u32(),e.stage=t.u8(),e}function eu(t,n){t.u64(n.sourceId),t.u32(n.skillId),t.u8(n.stage)}var ou="SkillStageNotify";function au(t,n){let e={};return e.sourceId=t.u64(),e.curDirectionYaw=d(t,n),e.newDirectionYaw=d(t,n),e.aimTargetPosition=r(t,n),t.bool()&&(e.pitchRotation=d(t,n)),t.bool()&&(e.aiStateId=t.u32()),e.curPosition=r(t,n),t.bool()&&(e.unk1_m=t.u32()),e.skillLevel=t.u8(),e.newPosition=r(t,n),e.skillId=t.u32(),e.skillOptionData=Jn(t,n),e}function uu(t,n){t.u64(n.sourceId),S(t,n.curDirectionYaw),S(t,n.newDirectionYaw),p(t,n.aimTargetPosition),t.bool(n.pitchRotation!==void 0)&&S(t,n.pitchRotation),t.bool(n.aiStateId!==void 0)&&t.u32(n.aiStateId),p(t,n.curPosition),t.bool(n.unk1_m!==void 0)&&t.u32(n.unk1_m),t.u8(n.skillLevel),p(t,n.newPosition),t.u32(n.skillId),$i(t,n.skillOptionData)}var iu="SkillStartNotify";function ru(t,n){let e={};return e.statusEffectData=b(t,n),e.objectId=t.u64(),e.new=t.bool(),e}function su(t,n){k(t,n.statusEffectData),t.u64(n.objectId),t.bool(n.new)}var _u="StatusEffectAddNotify";function mu(t,n){let e={};return e.statusEffectIds=t.array(t.u16(),()=>t.u32(),80),e.objectId=t.u64(),e.reason=t.u8(),e}function fu(t,n){t.array(n.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{t.u32(e)}),t.u64(n.objectId),t.u8(n.reason)}var lu="StatusEffectRemoveNotify";function du(t,n){let e={};return e.effectInstanceId=t.u32(),e.targetId=t.u64(),e.expirationTick=t.u64(),e}function pu(t,n){t.u32(n.effectInstanceId),t.u64(n.targetId),t.u64(n.expirationTick)}var cu="StatusEffectDurationNotify";function bu(t,n){let e={};return e.objectId=t.u64(),e.effectInstanceId=t.u32(),e.characterId=t.u64(),e.value=t.u32(),e}function ku(t,n){t.u64(n.objectId),t.u32(n.effectInstanceId),t.u64(n.characterId),t.u32(n.value)}var xu="StatusEffectSyncDataNotify";function Pu(t,n){let e={};return e.step=t.u32(),e.unk2_m=t.bool(),e.triggerId=t.u32(),e}function Tu(t,n){t.u32(n.step),t.bool(n.unk2_m),t.u32(n.triggerId)}var Su="TriggerBossBattleStatus";function Nu(t,n){let e={};return e.packetResultCode=t.u32(),e.triggerId=t.u32(),e.unk0_m=t.u32(),e.involvedPCs=t.array(t.u16(),()=>t.u64(),40),e}function vu(t,n){t.u32(n.packetResultCode),t.u32(n.triggerId),t.u32(n.unk0_m),t.array(n.involvedPCs,{maxLen:40,lenType:"u16"},e=>{t.u64(e)})}var hu="TriggerFinishNotify";function Iu(t,n){let e={};return e.triggerId=t.u32(),e.triggerSignalType=t.u32(),e.sourceId=t.u64(),e.involvedPCs=t.array(t.u16(),()=>t.u64(),40),e}function Eu(t,n){t.u32(n.triggerId),t.u32(n.triggerSignalType),t.u64(n.sourceId),t.array(n.involvedPCs,{maxLen:40,lenType:"u16"},e=>{t.u64(e)})}var Du="TriggerStartNotify";function Ku(t,n){let e={};return e.maxHp=i(t,n),e.characterId=t.u64(),e.unk0_m=t.u32(),e.statusEffectDatas=t.array(t.u16(),()=>b(t,n),80),e.position=t.u64(),e.curHp=i(t,n),e}function Ru(t,n){m(t,n.maxHp),t.u64(n.characterId),t.u32(n.unk0_m),t.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{k(t,e)}),t.u64(n.position),m(t,n.curHp)}var Lu="TroopMemberUpdateMinNotify";function Au(t,n){let e={};return e.identityGauge1=t.u32(),e.identityGauge2=t.u32(),e.identityGauge3=t.u32(),e.playerId=t.u64(),e}function wu(t,n){t.u32(n.identityGauge1),t.u32(n.identityGauge2),t.u32(n.identityGauge3),t.u64(n.playerId)}var Bu="IdentityGaugeChangeNotify";function Cu(t,n){let e={};return e.objectId=t.u64(),e}function Mu(t,n){t.u64(n.objectId)}var ju="ZoneObjectUnpublishNotify";function dr(t,n){let e={};return e.stackCount=t.u8(),e.target=t.u8(),e.id=t.u32(),e}function pr(t,n){t.u8(n.stackCount),t.u8(n.target),t.u32(n.id)}function Fu(t,n){let e={};return e.zoneStatusEffectDataList=t.array(t.u16(),()=>dr(t,n),4),e}function qu(t,n){t.array(n.zoneStatusEffectDataList,{maxLen:4,lenType:"u16"},e=>{pr(t,e)})}var Wu="ZoneStatusEffectAddNotify";function Ou(t,n){let e={};return e.statusEffectId=t.u32(),e}function Uu(t,n){t.u32(n.statusEffectId)}var Zu="ZoneStatusEffectRemoveNotify";function zu(t,n){let e={};return e.skillLevel=t.u8(),e.caster=t.u64(),e.skillId=t.u32(),e}function Vu(t,n){t.u8(n.skillLevel),t.u64(n.caster),t.u32(n.skillId)}var Hu="SkillCastNotify";function Gu(t,n){let e={};return e.objectId=t.u64(),e.stance=t.u8(),e}function Yu(t,n){t.u64(n.objectId),t.u8(n.stance)}var $u="IdentityStanceChangeNotify";function Ju(t,n){let e={};return e.objectId=t.u64(),e.equipItemDataList=t.array(t.u16(),()=>D(t,n),32),e}function Qu(t,n){t.u64(n.objectId),t.array(n.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{K(t,e)})}var Xu="EquipChangeNotify";function yu(t,n){let e={};return e.objectId=t.u64(),e.equipLifeToolDataList=t.array(t.u16(),()=>D(t,n),9),e}function gu(t,n){t.u64(n.objectId),t.array(n.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{K(t,e)})}var ni="EquipLifeToolChangeNotify";function cr(t,n){let e={};return t.bool()&&(e.serialNumber=t.u64(),e.id=t.u32(),e.level=t.u16(),e.slot=t.u16(),e.durability=t.u32(),e.unk1_6_m=t.u32(),e.flag=t.u32(),e.expireTime=l(t),e.lockUpdateTime=l(t)),e}function br(t,n){t.bool(n.slot!==void 0)&&(t.u64(n.serialNumber),t.u32(n.id),t.u16(n.level),t.u16(n.slot),t.u32(n.durability),t.u32(n.unk1_6_m),t.u32(n.flag),v(t,n.expireTime),v(t,n.lockUpdateTime))}function ti(t,n){let e={};return e.itemDataList=t.array(t.u16(),()=>cr(t,n),80),e.storageType=t.u8(),e}function ei(t,n){t.array(n.storageType===1?n.itemDataList:[],{maxLen:80,lenType:"u16"},e=>{br(t,e)}),t.u8(n.storageType)}var oi="InitItem";function kr(t,n){let e={};return e.npcId=t.u32(),e.isDead=t.bool(),e}function xr(t,n){t.u32(n.npcId),t.bool(n.isDead)}function ai(t,n){let e={};return e.raidResult=t.u8(),e.raidId=t.u32(),e.totalTime=t.u64(),e.bossKillDataList=t.array(t.u16(),()=>kr(t,n),3),e.endTick=t.u64(),e.startTick=t.u64(),e}function ui(t,n){t.u8(n.raidResult),t.u32(n.raidId),t.u64(n.totalTime),t.array(n.bossKillDataList,{maxLen:3,lenType:"u16"},e=>{xr(t,e)}),t.u64(n.endTick),t.u64(n.startTick)}var ii="RaidBegin";function ri(t,n){let e={};return e.zoneInstId=t.u64(),e.zoneId=t.u32(),e.loadComplete=t.bool(),e.completeMembers=t.array(t.u16(),()=>t.u64(),40),e.totalMembers=t.array(t.u16(),()=>t.u64(),40),e.firstPCEnterTick=t.u64(),e.zoneLevel=t.u8(),e}function si(t,n){t.u64(n.zoneInstId),t.u32(n.zoneId),t.bool(n.loadComplete),t.array(n.completeMembers,{maxLen:40,lenType:"u16"},e=>{t.u64(e)}),t.array(n.totalMembers,{maxLen:40,lenType:"u16"},e=>{t.u64(e)}),t.u64(n.firstPCEnterTick),t.u8(n.zoneLevel)}var _i="ZoneMemberLoadStatusNotify";function Pr(t,n){let e={};return e.position=r(t),e.objectId=t.u64(),e.ownerId=t.u64(),e.skillId=t.u32(),e.skillEffect=t.u32(),e}function Tr(t,n){p(t,n.position),t.u64(n.objectId),t.u64(n.ownerId),t.u32(n.skillId),t.u32(n.skillEffect)}function mi(t,n){let e={};return e.trapData=Pr(t,n),e}function fi(t,n){Tr(t,n.trapData)}var li="NewTrap";function di(t,n){let e={};return e.players=t.array(t.u8(),()=>{let o={};return o.name=t.string(20),o.stats=t.array(t.u8(),()=>{let u={};return u.id=t.u8(),u.value=t.u32(),u},100),o},24),e}function pi(t,n){t.array(n.players,{maxLen:24,lenType:"u8"},e=>{t.string(e.name,20),t.array(e.stats,{maxLen:100,lenType:"u8"},o=>{t.u8(o.id),t.u32(o.value)})})}var ci="APP_StatApi";var bi=new Map([[0,[To,xo,Po]],[1,[vo,So,No]],[2,[Eo,ho,Io]],[4,[Ro,Do,Ko]],[5,[wo,Lo,Ao]],[6,[Mo,Bo,Co]],[7,[qo,jo,Fo]],[8,[Uo,Wo,Oo]],[9,[Vo,Zo,zo]],[10,[Yo,Ho,Go]],[11,[Qo,$o,Jo]],[12,[go,Xo,yo]],[13,[ea,na,ta]],[14,[ia,aa,ua]],[15,[_a,ra,sa]],[16,[la,ma,fa]],[17,[ca,da,pa]],[18,[xa,ba,ka]],[19,[Sa,Pa,Ta]],[20,[ha,Na,va]],[21,[Da,Ia,Ea]],[22,[La,Ka,Ra]],[23,[Ba,Aa,wa]],[24,[ja,Ca,Ma]],[25,[Wa,Fa,qa]],[26,[Za,Oa,Ua]],[27,[Ha,za,Va]],[28,[$a,Ga,Ya]],[29,[Xa,Ja,Qa]],[30,[nu,ya,ga]],[31,[ou,tu,eu]],[32,[iu,au,uu]],[34,[_u,ru,su]],[35,[lu,mu,fu]],[36,[cu,du,pu]],[37,[xu,bu,ku]],[38,[Su,Pu,Tu]],[39,[hu,Nu,vu]],[40,[Du,Iu,Eu]],[41,[Lu,Ku,Ru]],[42,[Bu,Au,wu]],[43,[ju,Cu,Mu]],[44,[Wu,Fu,qu]],[45,[Zu,Ou,Uu]],[46,[Hu,zu,Vu]],[47,[$u,Gu,Yu]],[48,[Xu,Ju,Qu]],[49,[ni,yu,gu]],[50,[oi,ti,ei]],[52,[ii,ai,ui]],[51,[_i,ri,si]],[53,[li,mi,fi]],[6e4,[ci,di,pi]]]);var Ss=require("tiny-typed-emitter");var nt=class{#t;#n;#e;#o;#a;#u;constructor(n,e,o,u,s,_){this.#t=n,this.#n=e,this.#e=o,this.#o=u,this.#a=s,this.#u=_}#i;get parsed(){if(!this.#i)try{this.#i=this.#u(this.#a.decrypt(this.#t,this.#n,this.#e,this.#o))}catch(n){console.error(`[meter-core/pkt-stream] - ${n}`);return}return this.#i}};var Fn=class{time;#t;#n;#e;#o;constructor(...n){if(n.length===5){let[e,o,u,s,_]=n;this.#n=e,this.time=u,this.#t=o,this.#e=s,this.#o=_}else if(n.length===3){let[e,o,u]=n;this.#n=Buffer.alloc(0),this.time=new Date,this.#t=o,this.#e=()=>e,this.#o=u}else throw new Error("[meter-core/logger/parser] - LogEvent<T>: Invalid constructor arguments")}#a;get parsed(){if(!this.#a)try{this.#a=this.#e(new a(this.#n))}catch(n){console.error(`[meter-core/logger/parser] - parsed - ${n}`);return}return this.#a}#u;get serialized(){if(!this.#u)try{if(!this.parsed)return;let n=new Un;n.skip(xi),this.#o(n,this.parsed);let e=n.value;e.writeUint16LE(e.length,Nr),e.writeUint16LE(this.#t,et),e.writeUintLE(+new Date,ki,ot),this.#u=n.value}catch(n){console.error(`[meter-core/logger/parser] - serialized - ${n}`);return}return this.#u}},qn=6,Sr=2,Nr=0,tt=2,et=Nr+Sr,ot=6,ki=et+tt,xi=Sr+tt+ot;var Ir=require("fs");var at=class{buffer;position;out;constructor(){this.buffer=null,this.position=0,this.out=[]}write(n){for(;n.length>0;){if(this.buffer){if(this.buffer.length<2){let u=this.buffer[0],s=(n[0]<<8)+u;this.buffer=Buffer.alloc(s),this.buffer[0]=u,this.position=1}let o=Math.min(n.length,this.buffer.length-this.position);n.copy(this.buffer,this.position,0,o),this.position+=o,this.position===this.buffer.length&&(this.out.push(this.buffer),this.buffer=null,this.position=0),n=n.subarray(o);continue}if(n.length<2){this.buffer=Buffer.from(n),this.position=n.length;break}let e=n.readUInt16LE(0);if(e===0){this.buffer=null;return}if(e>n.length){this.buffer=Buffer.alloc(e),n.copy(this.buffer),this.position=n.length;break}this.out.push(n.subarray(0,e)),n=n.subarray(e)}}read(){return this.out.shift()}};var Er=require("fs");var Wn=class extends hr.TypedEmitter{},Pi=class extends Wn{#t;#n;constructor(n,e,o){super(),this.#t=e,o&&(this.#n=(0,Ir.createWriteStream)(o,{highWaterMark:0}));let u=Buffer.allocUnsafe(qn);u.writeUIntLE(3,0,qn),this.#n?.write(u),n.on("*",this.handlePkt.bind(this))}handlePkt(n,e,o,u){try{let s=bo.get(e),_=yi.get(e);if(s&&_){let[x]=_,[R,N]=s,F=bi.get(x);if(F){let[On,vs,Dr]=F,Si=new nt(Buffer.from(n),e,o,!!u,this.#t,N).parsed;if(!Si)return;let ut=new Fn(Si,x,Dr);this.emit(On,ut),this.emit("*",On,ut),this.appendLog(ut)}}}catch(s){console.error(s)}}appendLog(n){this.#n&&n.serialized&&this.#n.write(n.serialized)}},Ti=class extends Wn{readLogByChunk(n){let e=new at,o=(0,Er.createReadStream)(n),u=!1,s;o.on("data",_=>{if(s===void 0){if(s=this.readVersion(_),s>3){o.destroy();return}_=_.subarray(qn)}e.write(_);let x;for(;x=e.read();)this.readLogChunk(x,s)}).on("end",()=>{u=!0,this.emit("fileEnd","end")}).on("close",()=>{u||this.emit("fileEnd","closed")})}readLogChunk(n,e){try{if(n.length<8)return!1;let o=n.readUIntLE(et,tt),u=new Date(n.readUintLE(ki,ot)),s=n.subarray(xi),_=bi.get(o);if(_){let[x,R,N]=_,F=new Fn(s,o,new Date(u),On=>R(On,e),N);this.emit(x,F),this.emit("*",x,F)}}catch(o){console.error(o)}}readVersion(n){return n.readUintLE(0,qn)}};0&&(module.exports={LiveLogger,Logger,ReplayLogger});
