var ro=Object.defineProperty;var Cr=Object.getOwnPropertyDescriptor;var Mr=Object.getOwnPropertyNames;var jr=Object.prototype.hasOwnProperty;var Fr=(o,n)=>{for(var e in n)ro(o,e,{get:n[e],enumerable:!0})},qr=(o,n,e,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let _ of Mr(n))!jr.call(o,_)&&_!==e&&ro(o,_,{get:()=>n[_],enumerable:!(t=Cr(n,_))||t.enumerable});return o};var Wr=o=>qr(ro({},"__esModule",{value:!0}),o);var Ks={};Fr(Ks,{LiveLogger:()=>Ia,Logger:()=>gn,ReplayLogger:()=>Ea});module.exports=Wr(Ks);var Lr=require("tiny-typed-emitter");var u=class{b;o;constructor(n){this.b=n,this.o=0}skip(n=0){this.o+=n}bool(){return this.u8()===1}u8(){return this.b.readUint8(this.o++)}i8(){return this.b.readInt8(this.o++)}u16(){let n=this.b.readUint16LE(this.o);return this.o+=2,n}i16(){let n=this.b.readInt16LE(this.o);return this.o+=2,n}u32(){let n=this.b.readUint32LE(this.o);return this.o+=4,n}i32(){let n=this.b.readInt32LE(this.o);return this.o+=4,n}f32(){let n=this.b.readFloatLE(this.o);return this.o+=4,n}u64(){let n=this.b.readBigUint64LE(this.o);return this.o+=8,n}i64(){let n=this.b.readBigInt64LE(this.o);return this.o+=8,n}string(n){let e=this.u16();if(e<=n){e=e*2;let t=this.b.toString("utf16le",this.o,this.o+e);return this.o+=e,t}return""}bytes(n=0,e,t){if(e&&n>e)return Buffer.alloc(0);t&&(n=n*t);let _=Buffer.from(this.b.subarray(this.o,this.o+n));return this.o+=n,_}array(n,e,t){return t&&n>t?[]:new Array(n).fill(void 0).map(e)}},Un=class{b;o;constructor(n=65535){this.b=Buffer.allocUnsafe(n),this.o=0}get value(){return this.b.subarray(0,this.o)}skip(n=0){this.o+=n}bool(n=!1){return this.u8(n?1:0),n}u8(n=0){this.b.writeUInt8(n,this.o++)}i8(n=0){this.b.writeInt8(n,this.o++)}u16(n=0){this.o=this.b.writeUInt16LE(n,this.o)}i16(n=0){this.o=this.b.writeInt16LE(n,this.o)}u32(n=0){this.o=this.b.writeUInt32LE(n,this.o)}i32(n=0){this.o=this.b.writeInt32LE(n,this.o)}f32(n=0){this.o=this.b.writeFloatLE(n,this.o)}u64(n=0n){this.o=this.b.writeBigUInt64LE(BigInt(n),this.o)}i64(n=0n){this.o=this.b.writeBigInt64LE(BigInt(n),this.o)}string(n="",e=0){this.u16(n.length),n.length<=e&&(this.o+=this.b.write(n,this.o,"utf16le"))}bytes(n=Buffer.alloc(0),e={}){if(e.maxLen){let t=e.multiplier??1;if(n.length%t)throw new Error(`Error writing bytes, chunkSize should be a multiple of intut value size, got ${n.length}%${t}`);let _=n.length/t;if(_>e.maxLen)throw new Error(`Error writing bytes, input value size exceeded maxLen, got ${_} > ${e.maxLen}`);if(!e.lenType)throw new Error(`Error writing bytes, invalid lenType when writing chunks, got ${e.lenType}`);this[e.lenType](_)}else if(e.length&&n.length!==e.length)throw new Error(`Error writing bytes, input value size doesn't match opts.length, ${n.length} !== ${e.lenType}`);this.o+=n.copy(this.b,this.o)}array(n=[],e,t){if(n===void 0||n.length>e.maxLen){this[e.lenType](0);return}this[e.lenType](n.length),n.forEach(t)}};function A(o){let n={};return n.points=o.u16(),n.level=o.u8(),n.id=o.u32(),n}function io(o){let n=new u(o),e={};return e.abilityDataList=n.array(n.u16(),()=>A(n),100),e}var mo="PKTAbilityChangeNotify",q=44427;function Ka(o){let n={};return n.level=o.u32(),n.featureType=o.u16(),n}function fo(o){let n=new u(o),e={};return e.activeAbilityList=n.array(n.u16(),()=>Ka(n),60),e.objectId=n.u64(),e}var lo="PKTActiveAbilityNotify",W=29225;function co(o){let n=new u(o),e={};return e.addonFeatureIdList=n.bytes(n.u16(),200,4),e.addonSkillFeatureList=n.array(n.u16(),()=>{let t={};return t.addonSkillFeatureIdList=n.array(n.u16(),()=>n.u32(),5),t.skillId=n.u32(),t},200),e.objectId=n.u64(),e}var po="PKTAddonSkillFeatureChangeNotify",g=26726;function ko(o){let n=new u(o),e={};return e.packetResultCode=n.u32(),e.unk1_m=n.bytes(n.u32(),688),e}var vo="PKTAuthTokenResult",xo=14686;function To(o){let n=new u(o),e={};return e.paralyzationPoint=n.u32(),e.type=n.u8(),n.skip(1),e.objectId=n.u64(),e.paralyzationMaxPoint=n.u32(),e}var So="PKTBlockSkillStateNotify",O=26677;function Po(o){let n=new u(o),e={};return e.targetId=n.u64(),e.sourceId=n.u64(),e.type=n.u32(),n.skip(1),e}var No="PKTCounterAttackNotify",U=13330;function bo(o){let n=new u(o),e={};return e.unk0_m=n.u64(),n.bool()&&(e.abnormalStatusType=n.u8()),e.effectId=n.u32(),e.sourceId=n.u64(),e.targetId=n.u64(),e.durabilityDecrement=n.u8(),e.directionYaw=n.u16(),n.bool()&&(e.damageAttr=n.u8()),e.unk2_m=n.u32(),n.bool()&&(e.deathType=n.u8()),e}var ho="PKTDeathNotify",Z=40622;var Or=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Ur(o){return!(o%4||!(o%100)&&o%400)}function Zr(o,n,e){if(o>99){if(o<1752||o==1752&&(n<9||n==9&&e<<14))return!1}else o+=1900;return e>0&&n<=12&&(e<=Or[n]||e==29&&n==2&&Ur(o))}function Io(o){let n=Number(o&0xffffffffn),e=Number(o>>32n&0xffffffffn),t=n&4095,_=(n&65535)>>12,s=n>>16&31;Zr(t,_,s)||(t=_=s=0);let i=n>>21&31,T=n>>26&63,L=e&63,b=e>>6&16383;return i<24&&T<60&&L<60&&b<1e3||(i=24,T=L=b=0),new Date(Date.UTC(t<=99?t+1900:t,_-1,s,i,T,L,b))}function Ra(o){let n=0n;return n|=BigInt(o.getUTCMilliseconds())<<38n,n|=BigInt(o.getUTCSeconds())<<32n,n|=BigInt(o.getUTCMinutes())<<26n,n|=BigInt(o.getUTCHours())<<21n,n|=BigInt(o.getUTCDate())<<16n,n|=BigInt(o.getUTCMonth()+1)<<12n,n|=BigInt(o.getUTCFullYear()<2e3?o.getUTCFullYear()-1900:o.getUTCFullYear()),n}function c(o,n=0){let e=o.u16();return(e&4095)<2079?(o.o-=2,Io(o.i64())):Io(BigInt(e)&0xfffn|0x11000n)}function h(o,n=Io(0x1181fn)){n.getUTCFullYear()>=2079?o.u16(Number(Ra(n)&0xffffn)):o.i64(Ra(n))}function P(o){let n={};return o.bool()&&(n.unk1_0=o.u8()),n.level=o.u16(),n.itemTint=o.bytes(o.u16(),5,14),n.unk4=o.u8(),n.expireTime=c(o),n.slot=o.u16(),n.id=o.u32(),n}function Eo(o){let n=new u(o),e={};return e.objectId=n.u64(),e.unk1=n.u32(),e.unk2=n.u32(),e.equipItemDataList=n.array(n.u16(),()=>P(n),33),e}var Do="PKTEquipChangeNotify",z=47337;function Ko(o){let n=new u(o),e={};return e.equipLifeToolDataList=n.array(n.u16(),()=>P(n),9),e.objectId=n.u64(),e}var Ro="PKTEquipLifeToolChangeNotify",V=29994;function Lo(o){let n=new u(o),e={};return e.objectId=n.u64(),n.skip(1),e.stance=n.u8(),e}var Ao="PKTIdentityStanceChangeNotify",H=58886;function wo(o){let n=new u(o),e={};return e.struct_140=n.bytes(n.u16(),353,48),e.abilityDataList=n.array(n.u16(),()=>A(n),100),e}var Bo="PKTInitAbility",G=33308;function Co(o){let n=new u(o),e={};return e.lostArkDateTime=c(n),e.unk1=n.u64(),e.unk2=n.u32(),e.playerId=n.u64(),e.unk4=n.u32(),e.struct_33=n.array(n.u16(),()=>{let t={};return t.versionString=n.string(64),t.struct_580=n.string(32),t.struct_597=n.string(128),t},64),e.struct_597=n.string(128),e.unk7=n.u8(),e}var Mo="PKTInitEnv",Y=56231;function zr(o){if(o.length===0)return 0n;if(o.length>8)throw new Error("Value is too large");let n=Buffer.alloc(8);return o.copy(n),n.readBigInt64LE()}function a(o,n=0){let e=o.u8(),t=o.bytes(e>>1&7),_=zr(t)<<4n|BigInt(e>>4);return e&1?-_:_}function d(o,n=0n){let e=Buffer.alloc(8),t=n<0n;e.writeBigInt64LE((t?-n:n)>>4n);let _=0;for(let[s,i]of e.entries())i!=0&&(_=s+1);if(_>7)throw new Error("Value is too large");o.u8(Number((t?-n:n)&0xfn)<<4|(_&7)<<1|(t?1:0)),o.bytes(e.subarray(0,_),{length:_})}function w(o){let n={};return n.unk0=o.u8(),n.unk1=o.u8(),n.unk2=a(o),n.unk3=o.u16(),n.unk4=o.u64(),n.unk5=a(o),n.unk6=o.u8(),n}function p(o){let n={};return n.stackCount=o.u8(),o.bool()&&(n.value=o.bytes(16)),n.skillLevel=o.u8(),n.sourceId=o.u64(),n.effectInstanceId=o.u32(),n.struct_442=o.bytes(o.u16(),8,7),n.statusEffectId=o.u32(),o.bool()&&(n.unk9_0=o.u64()),n.occurTime=c(o),n.endTick=o.u64(),n.totalTime=o.f32(),n}function Fo(o){let n=new u(o),e={};return e.unk0=n.u32(),e.unk1=n.u32(),e.unk2=n.u16(),e.unk3=n.u32(),e.unk4=n.u8(),e.characterId=n.u64(),e.unk6=n.u8(),e.unk7=n.u8(),e.struct_336=n.string(7),e.unk9=n.bytes(35),e.unk10=n.u32(),e.unk11=n.u8(),e.struct_342=n.bytes(n.u16(),104,30),e.unk13=n.u8(),e.unk14=n.u32(),e.unk15=n.u32(),e.unk16=n.u32(),e.unk17=n.u8(),e.statPair=n.array(n.u16(),()=>{let t={};return t.value=a(n),t.statType=n.u8(),t},153),e.unk19=n.u32(),e.level=n.u16(),e.unk21=n.u8(),e.unk22=n.u64(),e.unk23=n.u32(),e.unk24=n.u64(),n.bool()&&(e.unk26_0=n.u32()),e.unk27=n.u16(),e.struct_226=n.bytes(n.u16(),3,17),e.unk29=n.u8(),e.unk30=n.u64(),e.unk31=n.u32(),e.unk32=n.u64(),e.unk33=n.u8(),e.unk34=n.u8(),e.unk35=n.u8(),e.unk36=n.bytes(25),e.unk37=n.u64(),e.playerId=n.u64(),e.unk39=n.u8(),e.unk40=n.u16(),e.unk41=n.u8(),e.classId=n.u16(),e.unk43=n.u8(),e.unk44=n.u8(),e.unk45=n.u8(),e.name=n.string(20),e.struct_109=n.bytes(n.u16(),64),e.unk48=n.u32(),e.unk49=n.bytes(120),e.unk50=n.u8(),e.gearLevel=n.f32(),e.unk52=n.u8(),e.unk53=n.u8(),e.periodUpdateStatDataList=n.array(n.u16(),()=>w(n),5),e.unk55=n.u16(),e.statusEffectDatas=n.array(n.u16(),()=>p(n),80),e.unk57=n.u8(),e}var qo="PKTInitPC",$=1329;function La(o){let n={},e=o.u16();return e===1&&(n.unk1_0=o.bytes(e)),n}function Aa(o){let n={};return n.struct_149=o.bytes(o.u16(),3,9),n.unk1=o.u8(),n.unk2=o.u8(),n.unk3=o.u32(),n.unk4=o.u8(),n.struct_148=La(o),n.unk6=o.u32(),n.unk7=o.u8(),n}function wa(o){let n={};return n.struct_236=o.array(o.u16(),()=>Aa(o),3),n.unk1=o.u32(),n.unk2=o.u32(),n.unk3=o.u16(),n.unk4=o.u32(),n.unk5=o.u32(),n.unk6=o.u32(),n.struct_261=o.bytes(o.u16(),2,9),n.struct_393=o.bytes(o.u16(),2,10),n.struct_238=o.bytes(o.u16(),10,18),n.unk10=o.u8(),n.struct_150=o.bytes(o.u16(),10,9),n.unk12=o.u64(),n.unk13=o.u32(),n}function Ba(o){let n={};return n.unk0=o.u8(),n.unk1=o.u8(),n.unk2=o.u16(),n.unk3=o.u8(),n.unk4=o.u16(),n.unk5=o.bytes(3),n.unk6=o.u16(),n.struct_102=o.bytes(o.u32(),51),n}function Ca(o){let n={};return n.unk0=o.u8(),n.unk1=o.bytes(o.u16(),7),o.bool()&&(n.struct_750=Ba(o)),n.unk4=o.bytes(o.u16(),7),n}function Ma(o){let n={};return n.unk0=o.u32(),n.struct_272=o.bytes(o.u16(),3,21),n.unk2=o.u32(),n.unk3=o.u32(),n.struct_437=o.bytes(o.u16(),3,10),n.unk5=o.u8(),n.struct_234=o.bytes(o.u16(),3,7),o.bool()&&(n.struct_790=Ca(o)),n.struct_240=o.bytes(o.u16(),10,29),o.bool()&&(n.struct_231=o.bytes(o.u16(),2,32)),n.unk12=o.u32(),n.itemTint=o.bytes(o.u16(),5,14),o.bool()&&(n.unk1_0=o.u32(),n.unk1_1=o.u32(),n.struct_194=o.bytes(o.u16(),5,30)),n.unk15=o.u32(),o.bool()&&(n.unk17_0=o.bytes(9)),n.unk18=o.u32(),o.bool()&&(n.unk20_0=o.bytes(10)),n}function zn(o){let n={};return n.npcId=o.u32(),n.isDead=o.bool(),n}function Fa(o){let n={};return n.unk0=o.u8(),n.struct_1=o.array(o.u16(),()=>{let e={};return e.struct_530=o.bytes(o.u16(),10),e.unk1_0_1=o.u32(),e},3),n.unk2=o.u32(),n.bossKillDataList=o.array(o.u16(),()=>zn(o),3),n.unk4=o.u8(),n}function qa(o){let n={};return n.struct_235=o.bytes(o.u16(),5,7),n.unk1=o.u8(),n.unk2=o.u8(),n.unk3=o.u8(),n.struct_234=o.bytes(o.u16(),3,7),n.struct_26=o.array(o.u16(),()=>{let e={};return e.unk1_0_0=o.u16(),e.struct_233=o.string(2),e.unk1_0_2=o.u8(),e},20),n}function Wa(o){let n={},e=o.u8();return e===1&&(n.struct_666=wa(o)),e===2&&(n.struct_137=o.bytes(o.u16(),3,6),n.unk2_1=o.u8(),n.struct_2=o.array(o.u16(),()=>{let t={};return t.unk1_0_0=o.u8(),t.unk1_0_1=o.u32(),t.struct_530=o.bytes(o.u16(),10),t.unk1_0_3=o.u8(),t},3)),e===3&&(n.unk3_0=o.bytes(26)),e===4&&(n.unk4_0=o.bytes(o.u16(),10,13),n.unk4_1=o.bytes(o.u16(),10,13),n.unk4_2=o.u32()),e===5&&(n.struct_665=Ma(o)),e===6&&(n.struct_612=Fa(o)),e===7&&(n.unk7_0=o.bytes(9)),e===8&&(n.struct_658=qa(o)),e===9&&(n.unk9_0=o.u8()),n}function ga(o){let n={};return o.u32()>0&&(n.serialNumber=o.u64(),n.id=o.u32(),n.level=o.u16(),n.slot=o.u16(),n.durability=o.u32(),n.unk1_6_m=o.u32(),n.flag=o.u32(),n.expireTime=c(o),n.lockUpdateTime=c(o),o.bool()&&(n.unk1_10_0=o.bytes(9)),n.unk1_11=o.u8(),n.unk1_12=o.u8(),n.unk1_13=o.u32(),n.struct_567=Wa(o),n.unk1_15=o.u32()),n}function Wo(o){let n=new u(o),e={};return e.itemDataList=n.array(n.u16(),()=>ga(n),80),e.storageType=n.u8(),e}var go="PKTInitItem",J=14657;function Oa(o){let n={};return o.bool()&&(n.unk1_0=o.bytes(9)),o.bool()&&(n.unk3_0=o.u32()),n.unk4=o.u32(),n.unk5=o.u32(),n.unk6=o.u32(),n}function Oo(o){let n=new u(o),e={};return e.addonFeatureIdList=n.bytes(n.u16(),200,4),e.statusEffectDatas=n.array(n.u16(),()=>p(n),80),e.addonSkillFeatureList=n.array(n.u16(),()=>{let t={};return t.addonSkillFeatureIdList=n.array(n.u16(),()=>n.u32(),5),t.skillId=n.u32(),t},200),e.unk3=n.u8(),e.unk4=n.u64(),e.unk5=n.u32(),n.bool()&&(e.unk7_0=n.u32()),e.struct_140=n.bytes(n.u16(),353,48),e.statPair=n.array(n.u16(),()=>{let t={};return t.value=a(n),t.statType=n.u8(),t},153),e.struct_226=n.bytes(n.u16(),3,17),e.unk11=n.u8(),e.unk12=n.u64(),e.struct_342=n.bytes(n.u16(),104,30),e.abilityDataList=n.array(n.u16(),()=>A(n),100),e.unk15=n.u8(),e.struct_421=n.array(n.u16(),()=>Oa(n),300),e}var Uo="PKTInitLocal",Q=18172;function Zo(o){let n=new u(o),e={};return e.serverAddr=n.string(256),e.account_CharacterId1=n.u64(),e.account_CharacterId2=n.u64(),e.unk3=n.u32(),e}var zo="PKTMigrationExecute",X=1184;function Ua(o){let n={};return n.unk0=o.u64(),n.unk1=o.u16(),n.unk2=o.u64(),n.unk3=o.u8(),n.lostArkString=o.string(20),n.unk5=o.u8(),n.equipItemDataList=o.array(o.u16(),()=>P(o),33),n.unk7=o.u8(),n.lookData=o.bytes(o.u32(),512),n}function Vo(o){return o>>20===1?-((~o>>>0)+1&2097151):o}function r(o,n=0){let e=o.u64();return{x:Vo(Number(e&0x1fffffn)),y:Vo(Number(e>>21n&0x1fffffn)),z:Vo(Number(e>>42n&0x1fffffn))}}function l(o,n={x:0,y:0,z:0}){o.u64(BigInt(Math.round(n.x??0)>>>0&2097151)|BigInt(Math.round(n.y??0)>>>0&2097151)<<21n|BigInt(Math.round(n.z??0)>>>0&2097151)<<42n)}function m(o,n=0){return o.u16()*(2*Math.PI)/65536}function S(o,n=0){o.u16(Math.round(n*65536/(2*Math.PI))%65536)}function Vn(o){let n={};return o.bool()&&(n.unk1_0=o.u64()),o.bool()&&(n.struct_734=Ua(o)),o.bool()&&(n.unk5_0=o.u8()),o.bool()&&(n.balanceLevel=o.u16()),o.bool()&&(n.transitIndex=o.u32()),o.bool()&&(n.unk11_0=o.u16()),n.level=o.u16(),n.unk13=o.u8(),o.bool()&&(n.unk15_0=o.u32()),o.bool()&&(n.unk17_0=o.u8()),o.bool()&&(n.unk19_0=o.u8()),o.bool()&&(n.unk21_0=o.u32()),n.statPair=o.array(o.u16(),()=>{let e={};return e.value=a(o),e.statType=o.u8(),e},153),o.bool()&&(n.unk24_0=o.u8()),o.bool()&&(n.unk26_0=o.u8()),n.statusEffectDatas=o.array(o.u16(),()=>p(o),80),o.bool()&&(n.unk29_0=o.u32()),n.position=r(o),n.spawnIndex=o.u32(),o.bool()&&(n.unk33_0=o.u32()),n.objectId=o.u64(),o.bool()&&(n.struct_273=o.bytes(o.u16(),12,12)),o.bool()&&(n.unk38_0=o.u8()),n.unk39=o.u8(),n.unk40=o.u8(),o.bool()&&(n.struct_337=o.bytes(o.u16(),11,9)),n.periodUpdateStatDataList=o.array(o.u16(),()=>w(o),5),o.bool()&&(n.unk45_0=o.u8()),n.unk46=o.u8(),n.unk47=o.u8(),n.typeId=o.u32(),n.directionYaw=m(o),n.unk50=o.u8(),n}function Ho(o){let n=new u(o),e={};return n.bool()&&(e.unk1_0=n.u8()),e.unk2=n.u8(),e.npcStruct=Vn(n),n.bool()&&(e.unk5_0=n.u64()),n.bool()&&(e.unk1_0_0=n.string(20),e.unk1_1=n.string(20)),e}var Go="PKTNewNpc",y=50175;function Yo(o){let n=new u(o),e={};return e.npcData=Vn(n),n.skip(34),e.ownerId=n.u64(),n.skip(1),e.publishReason=n.u8(),e}var $o="PKTNewNpcSummon",nn=8401;function za(o){let n={};return n.unk0=o.bytes(12),n.unk1=o.u32(),o.bool()&&(n.unk3_0=o.bytes(12)),n.unk4=o.u32(),n}function Va(o){let n={};return n.avgItemLevel=o.f32(),n.equipLifeToolDataList=o.array(o.u16(),()=>P(o),9),n.unk2=o.u32(),n.unk23_m=o.u8(),n.unk0_m=o.bytes(5),n.addonSkillFeatureList=o.array(o.u16(),()=>{let e={};return e.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),e.skillId=o.u32(),e},200),n.rvRLevel=o.u16(),n.lookData=o.bytes(o.u32(),512),n.guildName=o.string(20),n.unk1_m=o.u8(),n.firstHonorTitleId=o.u16(),n.worldId=o.u8(),n.unk29_m=o.u8(),n.statusEffectDatas=o.array(o.u16(),()=>p(o),80),n.unk14=o.u32(),n.unk4_m=o.u32(),n.level=o.u16(),n.unk17_m=o.u8(),n.addonFeatureIdList=o.bytes(o.u16(),200,4),n.unk45_m=o.u32(),n.position=r(o),n.name=o.string(20),n.equipItemDataList=o.array(o.u16(),()=>P(o),33),n.unk23=o.u8(),n.guildId=o.u64(),n.periodUpdateStatDataList=o.array(o.u16(),()=>w(o),5),n.unk5_m=o.u32(),n.unk27=o.u8(),n.unk28=o.u32(),n.unk29=o.u8(),n.classId=o.u16(),n.avatarHide=o.u8(),n.unk32=o.u64(),n.statPair=o.array(o.u16(),()=>{let e={};return e.value=a(o),e.statType=o.u8(),e},153),n.maxItemLevel=o.f32(),n.unk7_m=o.u32(),n.unk2_m=o.u8(),n.identityData=o.bytes(25),n.playerId=o.u64(),n.petId=o.u32(),n.secondHonorTitleId=o.u16(),o.bool()&&(n.grabbedData=o.bytes(12)),n.heading=m(o),n.unk32_m=o.u8(),n.unk25_m=o.u8(),n.characterId=o.u64(),n}function Jo(o){let n=new u(o),e={};return e.unk2_m=n.u8(),n.bool()&&(e.struct_64=n.array(n.u16(),()=>{let t={};return t.unk1_0_0=n.u32(),t.unk1_0_1=n.u64(),t.itemTint=n.bytes(n.u16(),5,14),t},5)),n.bool()&&(e.itemTint=n.bytes(n.u16(),5,14),e.unk1_1=n.u64(),e.unk1_2=n.u32()),e.unk0_m=n.u8(),n.bool()&&(e.trackMoveInfo=za(n)),e.pcStruct=Va(n),n.bool()&&(e.unk4_0_m=n.bytes(12)),n.bool()&&(e.unk5_0_m=n.bytes(20)),n.bool()&&(e.unk3_0_m=n.u32()),e}var Qo="PKTNewPC",on=24705;function B(o,n=0){return{first:o.u16(),second:o.u16(),third:o.u16()}}function Hn(o,n){o.u16(n.first),o.u16(n.second),o.u16(n.third)}function C(o,n=0){return{first:o.u8(),second:o.u8(),third:o.u8()}}function Gn(o,n){o.u8(n.first),o.u8(n.second),o.u8(n.third)}function Ha(o){let n={};return n.unk0=o.u8(),o.bool()&&(n.unk2_0=o.u64()),n.tripodLevel=B(o),n.unk4=o.u32(),n.unk5=o.u32(),n.unk6=o.u16(),n.targetObjectId=o.u64(),n.ownerId=o.u64(),n.unk9=o.u8(),n.unk10=o.u64(),o.bool()&&(n.unk12_0=o.u32()),o.bool()&&(n.struct_337=o.bytes(o.u16(),11,9)),n.tripodIndex=C(o),n.chainSkillEffect=o.u32(),n.skillLevel=o.u8(),n.unk18=o.u16(),n.skillId=o.u32(),n.projectileId=o.u64(),n.unk21=o.u32(),n.skillEffect=o.u32(),n.unk23=o.u64(),n}function ne(o){let n=new u(o),e={};return e.projectileInfo=Ha(n),e}var oe="PKTNewProjectile",en=44644;function Ga(o){let n={};return n.ownerId=o.u64(),n.objectId=o.u64(),n.skillId=o.u32(),n.unk3=o.u32(),n.unk4=o.u32(),n.unk5=o.u32(),n.unk6=o.u8(),o.bool()&&(n.struct_337=o.bytes(o.u16(),11,9)),n.skillEffect=o.u32(),n.unk10=o.u8(),n.unk11=o.u16(),n.position=r(o),n.unk13=o.u8(),n}function ee(o){let n=new u(o),e={};return e.unk0=n.u8(),e.trapData=Ga(n),e.unk2=n.u8(),e}var te="PKTNewTrap",tn=51471;function ue(o){let n=new u(o),e={};return e.paralyzationMaxPoint=n.u32(),e.enable=n.bool(),e.hitCheckTime=n.u32(),e.paralyzationPoint=n.u32(),e.objectId=n.u64(),n.skip(1),e.decreasePoint=n.u32(),n.skip(1),e.noHitCheckTime=n.u32(),n.skip(1),e}var _e="PKTParalyzationStateNotify",un=55896;function Ya(o){let n={};return n.characterLevel=o.u16(),n.name=o.string(20),n.curHp=a(o),n.position=r(o),n.auths=o.u8(),n.classId=o.u16(),n.zoneInstId=o.u64(),n.unk7=o.u8(),n.gearLevel=o.f32(),n.unk9=o.u16(),n.zoneId=o.u32(),n.transitIndex=o.u32(),n.unk12=o.u8(),n.unk13=o.u8(),n.worldId=o.u8(),n.partyMemberNumber=o.u8(),n.characterId=o.u64(),n.unk17=o.u8(),n.maxHp=a(o),n.unk19=o.u8(),n}function ae(o){let n=new u(o),e={};return e.partyInstanceId=n.u32(),e.memberDatas=n.array(n.u16(),()=>Ya(n),40),e.partyType=n.u8(),e.lootGrade=n.u32(),e.partyLootType=n.u8(),e.raidInstanceId=n.u32(),e}var re="PKTPartyInfo",_n=17285;function se(o){let n=new u(o),e={};return e.name=n.string(20),e.partyInstanceId=n.u32(),e.partyLeaveType=n.u8(),e}var ie="PKTPartyLeaveResult",an=44646;function me(o){let n=new u(o),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e.unk0_m=n.u8(),e.objectId=n.u64(),e}var de="PKTPartyPassiveStatusEffectAddNotify",rn=26921;function fe(o){let n=new u(o),e={};return e.objectId=n.u64(),e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var le="PKTPartyPassiveStatusEffectRemoveNotify",sn=46564;function ce(o){let n=new u(o),e={};return e.unk0=n.u64(),e.playerIdOnRefresh=n.u64(),e.unk2=n.u8(),e.statusEffectDatas=n.array(n.u16(),()=>p(n),80),e.characterId=n.u64(),e}var pe="PKTPartyStatusEffectAddNotify",mn=44546;function ke(o){let n=new u(o),e={};return e.unk0=n.u64(),e.statusEffectIds=n.array(n.u16(),()=>n.u32(),80),e.reason=n.u8(),e.characterId=n.u64(),e}var ve="PKTPartyStatusEffectRemoveNotify",dn=10041;function xe(o){let n=new u(o),e={};return n.skip(8),e.raidInstanceId=n.u32(),n.skip(1),e.characterId=n.u64(),e.partyInstanceId=n.u32(),n.skip(17),e}var Te="PKTPartyStatusEffectResultNotify",fn=13786;function Se(o){let n=new u(o),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var Pe="PKTPassiveStatusEffectAddNotify",ln=53848;function Ne(o){let n=new u(o),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var be="PKTPassiveStatusEffectRemoveNotify",cn=56637;function he(o){let n=new u(o),e={};return e.endTick=n.u64(),e.unk6_m=n.u64(),e.raidResult=n.u8(),e.bossKillDataList=n.array(n.u16(),()=>zn(n),3),e.unk4_m=n.u64(),e.unk0_m=n.bool(),e.unk5_m=n.u64(),e.startTick=n.u64(),e.totalTime=n.u64(),e.braveHeartCount=n.u8(),e.raidId=n.u32(),e.initBraveHeartCount=n.u8(),e.unk1_m=n.bool(),e.unk11_m=n.bool(),e}var Ie="PKTRaidBegin",pn=22851;function Ee(o){let n=new u(o),e={};return n.skip(1),e.typeId=n.u32(),e}var De="PKTRaidBossKillNotify",kn=38330;function Ke(o){let n=new u(o),e={};return e.struct_54=n.array(n.u16(),()=>{let t={};return t.unk1_0_0=a(n),t.unk1_0_1=n.u32(),t.unk1_0_2=a(n),t.struct_535=n.bytes(n.u16(),3),t},3),e.unk1=n.u64(),e.raidResult=n.u8(),e.unk3=n.u8(),e.unk4=n.u8(),e.unk5=n.u64(),e.unk6=n.u64(),e.unk7=n.u64(),e}var Re="PKTRaidResult",vn=10064;function $a(o){let n={};return n.unpublishReason=o.u8(),n.objectId=o.u64(),n}function Le(o){let n=new u(o),e={};return e.unpublishedObjects=n.array(n.u16(),()=>$a(n),200),e}var Ae="PKTRemoveObject",xn=35384;function we(o){let n=new u(o),e={};return n.skip(1),e.skillId=n.u32(),e.newDirectionYaw=m(n),n.skip(1),e.cancelReason=n.u8(),e.newPosition=r(n),e.caster=n.u64(),e}var Be="PKTSkillCancelNotify",Tn=13094;function Ce(o){let n=new u(o),e={};return n.skip(1),e.skillId=n.u32(),e.caster=n.u64(),n.skip(1),e.skillLevel=n.u8(),e}var Me="PKTSkillCastNotify",Sn=39612;function Yn(o,n=0){let e={},t=o.u8();return t&1&&(e.moveTime=o.u32()),t&2&&(e.standUpTime=o.u32()),t&4&&(e.downTime=o.u32()),t&8&&(e.freezeTime=o.u32()),t&16&&(e.moveHeight=o.u32()),t&32&&(e.farmostDist=o.u32()),t&64&&(e.flag40=o.bytes(o.u16(),6)),e}function Ja(o,n){let e=(n.moveTime===void 0?0:1)|(n.standUpTime===void 0?0:2)|(n.downTime===void 0?0:4)|(n.freezeTime===void 0?0:8)|(n.moveHeight===void 0?0:16)|(n.farmostDist===void 0?0:32)|(n.flag40===void 0?0:64);o.u8(e),e&1&&o.u32(n.moveTime),e&2&&o.u32(n.standUpTime),e&4&&o.u32(n.downTime),e&8&&o.u32(n.freezeTime),e&16&&o.u32(n.moveHeight),e&32&&o.u32(n.farmostDist),e&64&&o.bytes(n.flag40,{maxLen:6,lenType:"u16"})}function $n(o){let n={};return n.maxHp=a(o),n.damageType=o.u8(),n.unk3_m=o.u16(),o.bool()&&(n.damageAttr=o.u8()),n.curHp=a(o),n.targetId=o.u64(),n.damage=a(o),n.modifier=o.u8(),n}function ya(o){let n={};return n.skillMoveOptionData=Yn(o),n.destination=r(o),n.unk8_m=o.u16(),n.unk4_m=o.u16(),n.skillDamageEvent=$n(o),n.position=r(o),n.unk3_m=o.u16(),n.unk1_m=o.u8(),n.unk2_m=o.u64(),n}function je(o){let n=new u(o),e={};return e.unk2_m=n.u32(),e.unk1_m=n.u8(),e.skillDamageAbnormalMoveEvents=n.array(n.u16(),()=>ya(n),50),e.skillEffectId=n.u32(),e.skillId=n.u32(),e.sourceId=n.u64(),e}var Fe="PKTSkillDamageAbnormalMoveNotify",Pn=4102;function qe(o){let n=new u(o),e={};return n.bool()&&(e.unk1_0=n.u32()),e.skillId=n.u32(),e.sourceId=n.u64(),e.skillLevel=n.u8(),n.bool()&&(e.skillEffectId=n.u32()),e.skillDamageEvents=n.array(n.u16(),()=>$n(n),50),e}var We="PKTSkillDamageNotify",Nn=26079;function ge(o){let n=new u(o),e={};return n.skip(8),e.stage=n.u8(),e.skillId=n.u32(),n.skip(14),e.sourceId=n.u64(),n.skip(19),e}var Oe="PKTSkillStageNotify",bn=10317;function Jn(o,n=0){let e={},t=o.u8();return t&1&&(e.layerIndex=o.u8()),t&2&&(e.startStageIndex=o.u8()),t&4&&(e.transitIndex=o.u32()),t&8&&(e.stageStartTime=o.u32()),t&16&&(e.farmostDistance=o.u32()),t&32&&(e.tripodIndex=C(o)),t&64&&(e.tripodLevel=B(o)),e}function nr(o,n){let e=(n.layerIndex===void 0?0:1)|(n.startStageIndex===void 0?0:2)|(n.transitIndex===void 0?0:4)|(n.stageStartTime===void 0?0:8)|(n.farmostDistance===void 0?0:16)|(n.tripodIndex===void 0?0:32)|(n.tripodLevel===void 0?0:64);o.u8(e),e&1&&o.u8(n.layerIndex),e&2&&o.u8(n.startStageIndex),e&4&&o.u32(n.transitIndex),e&8&&o.u32(n.stageStartTime),e&16&&o.u32(n.farmostDistance),e&32&&Gn(o,n.tripodIndex),e&64&&Hn(o,n.tripodLevel)}function Ue(o){let n=new u(o),e={};return e.skillOptionData=Jn(n),e.newPosition=r(n),e.sourceId=n.u64(),e.aimTargetPosition=r(n),e.skillLevel=n.u8(),n.bool()&&(e.pitchRotation=m(n)),e.curPosition=r(n),n.bool()&&(e.aiStateId=n.u32()),e.newDirectionYaw=m(n),e.skillId=n.u32(),e.curDirectionYaw=m(n),n.bool()&&(e.unk1_m=n.u32()),e}var Ze="PKTSkillStartNotify",hn=53701;function ze(o){let n=new u(o),e={};return e.unk0=n.u8(),e.unk1=n.array(n.u16(),()=>{let t={};return t.value=a(n),t.statType=n.u8(),t},153),n.bool()&&(e.unk3_0=n.u32()),e.unk4=n.array(n.u16(),()=>{let t={};return t.value=a(n),t.statType=n.u8(),t},153),e.objectId=n.u64(),e}var Ve="PKTStatChangeOriginNotify",He=29922;function Ge(o){let n=new u(o),e={};return e.objectId=n.u64(),e.unk1=n.u64(),e.statusEffectData=p(n),n.bool()&&(e.unk4_0=n.u64()),e.new=n.bool(),e}var Ye="PKTStatusEffectAddNotify",In=35829;function $e(o){let n=new u(o),e={};return e.statusEffectIds=n.array(n.u16(),()=>n.u32(),80),e.reason=n.u8(),e.objectId=n.u64(),e}var Je="PKTStatusEffectRemoveNotify",En=16493;function Qe(o){let n=new u(o),e={};return n.skip(2),e.targetId=n.u64(),e.expirationTick=n.u64(),e.effectInstanceId=n.u32(),n.skip(2),e}var Xe="PKTStatusEffectDurationNotify",Dn=40374;function ye(o){let n=new u(o),e={};return n.skip(3),e.characterId=n.u64(),e.value=n.u32(),n.skip(4),e.objectId=n.u64(),e.effectInstanceId=n.u32(),e}var nt="PKTStatusEffectSyncDataNotify",Kn=10020;function ot(o){let n=new u(o),e={};return e.step=n.u32(),e.triggerId=n.u32(),n.skip(1),e.unk2_m=n.bool(),e}var et="PKTTriggerBossBattleStatus",Rn=12536;function tt(o){let n=new u(o),e={};return e.packetResultCode=n.u32(),e.triggerId=n.u32(),e.unk0_m=n.u32(),e.involvedPCs=n.array(n.u16(),()=>n.u64(),40),e}var ut="PKTTriggerFinishNotify",Ln=43956;function _t(o){let n=new u(o),e={};return e.triggerId=n.u32(),e.involvedPCs=n.array(n.u16(),()=>n.u64(),40),e.sourceId=n.u64(),e.triggerSignalType=n.u32(),e}var at="PKTTriggerStartNotify",An=7488;function rt(o){let n=new u(o),e={};return e.characterId=n.u64(),e.maxHp=a(n),e.position=n.u64(),e.unk0_m=n.u32(),e.curHp=a(n),e.statusEffectDatas=n.array(n.u16(),()=>p(n),80),e}var st="PKTTroopMemberUpdateMinNotify",wn=45338;function it(o){let n=new u(o),e={};return n.skip(1),e.identityGauge1=n.u32(),e.identityGauge2=n.u32(),e.identityGauge3=n.u32(),n.skip(3),e.playerId=n.u64(),e}var mt="PKTIdentityGaugeChangeNotify",Bn=2589;function dt(o){let n=new u(o),e={};return e.totalMembers=n.array(n.u16(),()=>n.u64(),40),e.completeMembers=n.array(n.u16(),()=>n.u64(),40),e.zoneLevel=n.u8(),e.loadComplete=n.bool(),e.firstPCEnterTick=n.u64(),e.zoneId=n.u32(),e.zoneInstId=n.u64(),e}var ft="PKTZoneMemberLoadStatusNotify",Cn=53608;function lt(o){let n=new u(o),e={};return n.skip(2),e.objectId=n.u64(),n.skip(1),e}var ct="PKTZoneObjectUnpublishNotify",Mn=9489;function er(o){let n={};return n.instanceId=o.u32(),o.skip(4),n.stackCount=o.u8(),n.id=o.u32(),n.target=o.u8(),n}function pt(o){let n=new u(o),e={};return e.zoneStatusEffectDataList=n.array(n.u16(),()=>er(n),4),e}var kt="PKTZoneStatusEffectAddNotify",jn=59381;function vt(o){let n=new u(o),e={};return n.skip(1),e.statusEffectId=n.u32(),e}var xt="PKTZoneStatusEffectRemoveNotify",Fn=7555;var Tt=new Map([[q,[mo,io]],[W,[lo,fo]],[g,[po,co]],[xo,[vo,ko]],[O,[So,To]],[U,[No,Po]],[Z,[ho,bo]],[z,[Do,Eo]],[V,[Ro,Ko]],[H,[Ao,Lo]],[G,[Bo,wo]],[Y,[Mo,Co]],[$,[qo,Fo]],[J,[go,Wo]],[Q,[Uo,Oo]],[X,[zo,Zo]],[y,[Go,Ho]],[nn,[$o,Yo]],[on,[Qo,Jo]],[en,[oe,ne]],[tn,[te,ee]],[un,[_e,ue]],[_n,[re,ae]],[an,[ie,se]],[rn,[de,me]],[sn,[le,fe]],[mn,[pe,ce]],[dn,[ve,ke]],[fn,[Te,xe]],[ln,[Pe,Se]],[cn,[be,Ne]],[pn,[Ie,he]],[kn,[De,Ee]],[vn,[Re,Ke]],[xn,[Ae,Le]],[Tn,[Be,we]],[Sn,[Me,Ce]],[Pn,[Fe,je]],[Nn,[We,qe]],[bn,[Oe,ge]],[hn,[Ze,Ue]],[He,[Ve,ze]],[In,[Ye,Ge]],[En,[Je,$e]],[Dn,[Xe,Qe]],[Kn,[nt,ye]],[Rn,[et,ot]],[Ln,[ut,tt]],[An,[at,_t]],[wn,[st,rt]],[Bn,[mt,it]],[Cn,[ft,dt]],[Mn,[ct,lt]],[jn,[kt,pt]],[Fn,[xt,vt]]]);var ur=new Map([[q,[0]],[W,[1]],[g,[2]],[O,[4]],[U,[5]],[Z,[6]],[G,[7]],[Y,[8]],[$,[9]],[Q,[10]],[X,[11]],[y,[12]],[nn,[13]],[on,[14]],[en,[15]],[un,[16]],[_n,[17]],[an,[18]],[rn,[19]],[sn,[20]],[mn,[21]],[dn,[22]],[fn,[23]],[ln,[24]],[cn,[25]],[kn,[26]],[vn,[27]],[xn,[28]],[Pn,[29]],[Nn,[30]],[bn,[31]],[hn,[32]],[In,[34]],[En,[35]],[Dn,[36]],[Kn,[37]],[Rn,[38]],[Ln,[39]],[An,[40]],[wn,[41]],[Bn,[42]],[Mn,[43]],[jn,[44]],[Fn,[45]],[Sn,[46]],[H,[47]],[z,[48]],[V,[49]],[J,[50]],[pn,[52]],[Cn,[51]],[tn,[53]],[Tn,[54]]]);function M(o,n){let e={};return e.points=o.u16(),e.id=o.u32(),e.level=o.u8(),e}function j(o,n){o.u16(n.points),o.u32(n.id),o.u8(n.level)}function Pt(o,n){let e={};return e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function Nt(o,n){o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var bt="AbilityChangeNotify";function _r(o,n){let e={};return e.featureType=o.u16(),e.level=o.u32(),e}function ar(o,n){o.u16(n.featureType),o.u32(n.level)}function ht(o,n){let e={};return e.activeAbilityList=o.array(o.u16(),()=>_r(o,n),60),e.objectId=o.u64(),e}function It(o,n){o.array(n.activeAbilityList,{maxLen:60,lenType:"u16"},e=>{ar(o,e)}),o.u64(n.objectId)}var Et="ActiveAbilityNotify";function Dt(o,n){let e={};return e.objectId=o.u64(),e.addonSkillFeatureList=o.array(o.u16(),()=>{let t={};return t.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),t.skillId=o.u32(),t},200),e}function Kt(o,n){o.u64(n.objectId),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},t=>{o.u32(t)}),o.u32(e.skillId)})}var Rt="AddonSkillFeatureChangeNotify";function Lt(o,n){let e={};return e.paralyzationMaxPoint=o.u32(),e.type=o.u8(),e.objectId=o.u64(),e.paralyzationPoint=o.u32(),e}function At(o,n){o.u32(n.paralyzationMaxPoint),o.u8(n.type),o.u64(n.objectId),o.u32(n.paralyzationPoint)}var wt="BlockSkillStateNotify";function Bt(o,n){let e={};return e.sourceId=o.u64(),e.targetId=o.u64(),e.type=o.u32(),e}function Ct(o,n){o.u64(n.sourceId),o.u64(n.targetId),o.u32(n.type)}var Mt="CounterAttackNotify";function jt(o,n){let e={};return e.sourceId=o.u64(),e.targetId=o.u64(),n>=4?(e.effectId=o.u32(),e.directionYaw=o.u16(),e.deathType=o.u8(),e.durabilityDecrement=o.u8(),e.abnormalStatusType=o.u8(),e.damageAttr=o.u8(),e.unk0_m=o.u64(),e.unk2_m=o.u32()):(e.effectId=0,e.directionYaw=0,e.deathType=0,e.durabilityDecrement=0,e.abnormalStatusType=0,e.damageAttr=0,e.unk0_m=0n,e.unk2_m=0),e}function Ft(o,n){o.u64(n.sourceId),o.u64(n.targetId),o.u32(n.effectId),o.u16(n.directionYaw),o.u8(n.deathType??0),o.u8(n.durabilityDecrement),o.u8(n.abnormalStatusType??0),o.u8(n.damageAttr??0),o.u64(n.unk0_m),o.u32(n.unk2_m)}var qt="DeathNotify";function Wt(o,n){let e={};return e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function gt(o,n){o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var Ot="InitAbility";function Ut(o,n){let e={};return e.playerId=o.u64(),e}function Zt(o,n){o.u64(n.playerId)}var zt="InitEnv";function v(o,n){let e={};return e.skillLevel=o.u8(),e.occurTime=c(o,n),e.statusEffectId=o.u32(),e.sourceId=o.u64(),e.totalTime=o.f32(),e.endTick=o.u64(),o.bool()&&(e.value=o.bytes(16)),e.effectInstanceId=o.u32(),n>=1?e.stackCount=o.u8():e.stackCount=1,e}function x(o,n){o.u8(n.skillLevel),h(o,n.occurTime),o.u32(n.statusEffectId),o.u64(n.sourceId),o.f32(n.totalTime),o.u64(n.endTick),o.bool(n.value!==void 0)&&o.bytes(n.value,{length:16}),o.u32(n.effectInstanceId),o.u8(n.stackCount)}function Vt(o,n){let e={};return e.statPair=o.array(o.u16(),()=>{let t={};return t.StatType=o.u8(),t.Value=a(o,n),t},152),e.name=o.string(20),e.level=o.u16(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.characterId=o.u64(),e.gearLevel=o.f32(),e.playerId=o.u64(),e.classId=o.u16(),e}function Ht(o,n){o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.string(n.name,20),o.u16(n.level),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.characterId),o.f32(n.gearLevel),o.u64(n.playerId),o.u16(n.classId)}var Gt="InitPC";function Yt(o,n){let e={};return e.statPair=o.array(o.u16(),()=>{let t={};return t.statType=o.u8(),t.value=a(o,n),t},152),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.addonSkillFeatureList=o.array(o.u16(),()=>{let t={};return t.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),t.skillId=o.u32(),t},200),e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function $t(o,n){o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},t=>{o.u32(t)}),o.u32(e.skillId)}),o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var Jt="InitLocal";function Qt(o,n){let e={};return e.account_CharacterId1=o.u64(),e.serverAddr=o.string(256),e.account_CharacterId2=o.u64(),e}function Xt(o,n){o.u64(n.account_CharacterId1),o.string(n.serverAddr,256),o.u64(n.account_CharacterId2)}var yt="MigrationExecute";function Qn(o,n){let e={};return e.spawnIndex=o.u32(),e.objectId=o.u64(),o.bool()&&(e.transitIndex=o.u32()),e.position=r(o,n),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.directionYaw=m(o,n),e.statPair=o.array(o.u16(),()=>{let t={};return t.statType=o.u8(),t.value=a(o,n),t},152),e.typeId=o.u32(),n>=1?(e.level=o.u16(),o.bool()&&(e.balanceLevel=o.u16())):e.level=0,e}function Xn(o,n){o.u32(n.spawnIndex),o.u64(n.objectId),o.bool(n.transitIndex!==void 0)&&o.u32(n.transitIndex),l(o,n.position),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),S(o,n.directionYaw),o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.u32(n.typeId),o.u16(n.level),o.bool(n.balanceLevel!==void 0)&&o.u16(n.balanceLevel)}function nu(o,n){let e={};return e.npcStruct=Qn(o,n),e}function ou(o,n){Xn(o,n.npcStruct)}var eu="NewNpc";function tu(o,n){let e={};return e.publishReason=o.u8(),e.ownerId=o.u64(),e.npcData=Qn(o,n),e}function uu(o,n){o.u8(n.publishReason),o.u64(n.ownerId),Xn(o,n.npcData)}var _u="NewNpcSummon";function K(o,n){let e={};return e.slot=o.u16(),e.level=o.u16(),e.itemTint=o.bytes(o.u16(),3,14),e.expireTime=c(o),e.id=o.u32(),e}function R(o,n){o.u16(n.slot),o.u16(n.level),o.bytes(n.itemTint,{maxLen:3,lenType:"u16",multiplier:14}),h(o,n.expireTime),o.u32(n.id)}function sr(o,n){let e={};return e.maxItemLevel=o.f32(),e.statPair=o.array(o.u16(),()=>{let t={};return t.statType=o.u8(),t.value=a(o,n),t},152),e.name=o.string(20),e.heading=m(o,n),e.characterId=o.u64(),e.playerId=o.u64(),e.addonSkillFeatureList=o.array(o.u16(),()=>{let t={};return t.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),t.skillId=o.u32(),t},200),e.classId=o.u16(),e.level=o.u16(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),n>=1?(e.avgItemLevel=o.f32(),e.position=r(o),e.equipItemDataList=o.array(o.u16(),()=>K(o,n),32),e.equipLifeToolDataList=o.array(o.u16(),()=>K(o,n),9),e.guildName=o.string(20),n>=2?e.guildId=o.u64():e.guildId=BigInt(o.u32())):(e.avgItemLevel=e.maxItemLevel,e.position={x:0,y:0,z:0},e.equipItemDataList=[],e.equipLifeToolDataList=[],e.guildName="",e.guildId=0n),e}function ir(o,n){o.f32(n.maxItemLevel),o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.string(n.name,20),S(o,n.heading),o.u64(n.characterId),o.u64(n.playerId),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},t=>{o.u32(t)}),o.u32(e.skillId)}),o.u16(n.classId),o.u16(n.level),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.f32(n.avgItemLevel),l(o,n.position),o.array(n.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{R(o,e)}),o.array(n.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{R(o,e)}),o.string(n.guildName,20),o.u64(n.guildId)}function ru(o,n){let e={};return e.pcStruct=sr(o,n),e}function su(o,n){ir(o,n.pcStruct)}var iu="NewPC";function mr(o,n){let e={};return e.tripodIndex=C(o,n),e.chainSkillEffect=o.u32(),e.skillEffect=o.u32(),e.skillId=o.u32(),e.targetObjectId=o.u64(),e.ownerId=o.u64(),e.skillLevel=o.u8(),e.projectileId=o.u64(),e.tripodLevel=B(o,n),e}function dr(o,n){Gn(o,n.tripodIndex),o.u32(n.chainSkillEffect),o.u32(n.skillEffect),o.u32(n.skillId),o.u64(n.targetObjectId),o.u64(n.ownerId),o.u8(n.skillLevel),o.u64(n.projectileId),Hn(o,n.tripodLevel)}function mu(o,n){let e={};return e.projectileInfo=mr(o,n),e}function du(o,n){dr(o,n.projectileInfo)}var fu="NewProjectile";function lu(o,n){let e={};return e.enable=o.bool(),e.paralyzationPoint=o.u32(),e.decreasePoint=o.u32(),e.paralyzationMaxPoint=o.u32(),e.noHitCheckTime=o.u32(),e.hitCheckTime=o.u32(),e.objectId=o.u64(),e}function cu(o,n){o.bool(n.enable),o.u32(n.paralyzationPoint),o.u32(n.decreasePoint),o.u32(n.paralyzationMaxPoint),o.u32(n.noHitCheckTime),o.u32(n.hitCheckTime),o.u64(n.objectId)}var pu="ParalyzationStateNotify";function fr(o,n){let e={};return e.maxHp=a(o,n),e.characterId=o.u64(),e.position=r(o,n),e.transitIndex=o.u32(),e.curHp=a(o,n),e.characterLevel=o.u16(),e.gearLevel=o.f32(),e.zoneId=o.u32(),e.partyMemberNumber=o.u8(),e.name=o.string(20),e.zoneInstId=o.u64(),e.worldId=o.u8(),e.classId=o.u16(),e.auths=o.u8(),e}function lr(o,n){d(o,n.maxHp),o.u64(n.characterId),l(o,n.position),o.u32(n.transitIndex),d(o,n.curHp),o.u16(n.characterLevel),o.f32(n.gearLevel),o.u32(n.zoneId),o.u8(n.partyMemberNumber),o.string(n.name,20),o.u64(n.zoneInstId),o.u8(n.worldId),o.u16(n.classId),o.u8(n.auths)}function ku(o,n){let e={};return e.raidInstanceId=o.u32(),e.lootGrade=o.u32(),e.partyType=o.u8(),e.partyInstanceId=o.u32(),e.partyLootType=o.u8(),e.memberDatas=o.array(o.u16(),()=>fr(o,n),40),e}function vu(o,n){o.u32(n.raidInstanceId),o.u32(n.lootGrade),o.u8(n.partyType),o.u32(n.partyInstanceId),o.u8(n.partyLootType),o.array(n.memberDatas,{maxLen:40,lenType:"u16"},e=>{lr(o,e)})}var xu="PartyInfo";function Tu(o,n){let e={};return e.partyLeaveType=o.u8(),e.partyInstanceId=o.u32(),e.name=o.string(20),e}function Su(o,n){o.u8(n.partyLeaveType),o.u32(n.partyInstanceId),o.string(n.name,20)}var Pu="PartyLeaveResult";function Nu(o,n){let e={};return e.objectId=o.u64(),e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e.unk0_m=o.u8(),e}function bu(o,n){o.u64(n.objectId),o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)}),o.u8(n.unk0_m)}var hu="PartyPassiveStatusEffectAddNotify";function Iu(o,n){let e={};return e.objectId=o.u64(),e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function Eu(o,n){o.u64(n.objectId),o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Du="PartyPassiveStatusEffectRemoveNotify";function Ku(o,n){let e={};return e.characterId=o.u64(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.playerIdOnRefresh=o.u64(),e}function Ru(o,n){o.u64(n.characterId),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.playerIdOnRefresh)}var Lu="PartyStatusEffectAddNotify";function Au(o,n){let e={};return e.characterId=o.u64(),e.statusEffectIds=o.array(o.u16(),()=>o.u32(),80),e.reason=o.u8(),e}function wu(o,n){o.u64(n.characterId),o.array(n.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{o.u32(e)}),o.u8(n.reason)}var Bu="PartyStatusEffectRemoveNotify";function Cu(o,n){let e={};return e.partyInstanceId=o.u32(),e.raidInstanceId=o.u32(),e.characterId=o.u64(),e}function Mu(o,n){o.u32(n.partyInstanceId),o.u32(n.raidInstanceId),o.u64(n.characterId)}var ju="PartyStatusEffectResultNotify";function Fu(o,n){let e={};return e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function qu(o,n){o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Wu="PassiveStatusEffectAddNotify";function gu(o,n){let e={};return e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function Ou(o,n){o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Uu="PassiveStatusEffectRemoveNotify";function Zu(o,n){let e={};return n>=4?e.typeId=o.u32():e.typeId=0,e}function zu(o,n){o.u32(n.typeId)}var Vu="RaidBossKillNotify";function Hu(o,n){let e={};return n>=3?e.raidResult=o.u8():e.raidResult=0,e}function Gu(o,n){o.u8(n.raidResult)}var Yu="RaidResult";function cr(o,n){let e={};return e.unpublishReason=o.u8(),e.objectId=o.u64(),e}function pr(o,n){o.u8(n.unpublishReason),o.u64(n.objectId)}function $u(o,n){let e={};return e.unpublishedObjects=o.array(o.u16(),()=>cr(o,n),200),e}function Ju(o,n){o.array(n.unpublishedObjects,{maxLen:200,lenType:"u16"},e=>{pr(o,e)})}var Qu="RemoveObject";function yn(o,n){let e={};return e.modifier=o.u8(),e.targetId=o.u64(),e.damageType=o.u8(),o.bool()&&(e.damageAttr=o.u8()),e.curHp=a(o,n),e.unk3_m=o.u16(),e.maxHp=a(o,n),e.damage=a(o,n),e}function no(o,n){o.u8(n.modifier),o.u64(n.targetId),o.u8(n.damageType),o.bool(n.damageAttr!==void 0)&&o.u8(n.damageAttr),d(o,n.curHp),o.u16(n.unk3_m),d(o,n.maxHp),d(o,n.damage)}function vr(o,n){let e={};return e.skillMoveOptionData=Yn(o,n),e.destination=r(o,n),e.position=r(o,n),e.skillDamageEvent=yn(o,n),e}function xr(o,n){Ja(o,n.skillMoveOptionData),l(o,n.destination),l(o,n.position),no(o,n.skillDamageEvent)}function Xu(o,n){let e={};return e.skillId=o.u32(),e.skillDamageAbnormalMoveEvents=o.array(o.u16(),()=>vr(o,n),50),e.skillEffectId=o.u32(),e.sourceId=o.u64(),e}function yu(o,n){o.u32(n.skillId),o.array(n.skillDamageAbnormalMoveEvents,{maxLen:50,lenType:"u16"},e=>{xr(o,e)}),o.u32(n.skillEffectId),o.u64(n.sourceId)}var n_="SkillDamageAbnormalMoveNotify";function o_(o,n){let e={};return e.skillLevel=o.u8(),e.sourceId=o.u64(),e.skillId=o.u32(),e.skillDamageEvents=o.array(o.u16(),()=>yn(o,n),50),e.skillEffectId=o.u32(),e}function e_(o,n){o.u8(n.skillLevel),o.u64(n.sourceId),o.u32(n.skillId),o.array(n.skillDamageEvents,{maxLen:50,lenType:"u16"},e=>{no(o,e)}),o.u32(n.skillEffectId??0)}var t_="SkillDamageNotify";function u_(o,n){let e={};return e.sourceId=o.u64(),e.skillId=o.u32(),e.stage=o.u8(),e}function __(o,n){o.u64(n.sourceId),o.u32(n.skillId),o.u8(n.stage)}var a_="SkillStageNotify";function r_(o,n){let e={};return e.sourceId=o.u64(),e.curDirectionYaw=m(o,n),e.newDirectionYaw=m(o,n),e.aimTargetPosition=r(o,n),o.bool()&&(e.pitchRotation=m(o,n)),o.bool()&&(e.aiStateId=o.u32()),e.curPosition=r(o,n),o.bool()&&(e.unk1_m=o.u32()),e.skillLevel=o.u8(),e.newPosition=r(o,n),e.skillId=o.u32(),e.skillOptionData=Jn(o,n),e}function s_(o,n){o.u64(n.sourceId),S(o,n.curDirectionYaw),S(o,n.newDirectionYaw),l(o,n.aimTargetPosition),o.bool(n.pitchRotation!==void 0)&&S(o,n.pitchRotation),o.bool(n.aiStateId!==void 0)&&o.u32(n.aiStateId),l(o,n.curPosition),o.bool(n.unk1_m!==void 0)&&o.u32(n.unk1_m),o.u8(n.skillLevel),l(o,n.newPosition),o.u32(n.skillId),nr(o,n.skillOptionData)}var i_="SkillStartNotify";function m_(o,n){let e={};return e.statusEffectData=v(o,n),e.objectId=o.u64(),e.new=o.bool(),e}function d_(o,n){x(o,n.statusEffectData),o.u64(n.objectId),o.bool(n.new)}var f_="StatusEffectAddNotify";function l_(o,n){let e={};return e.statusEffectIds=o.array(o.u16(),()=>o.u32(),80),e.objectId=o.u64(),e.reason=o.u8(),e}function c_(o,n){o.array(n.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{o.u32(e)}),o.u64(n.objectId),o.u8(n.reason)}var p_="StatusEffectRemoveNotify";function k_(o,n){let e={};return e.effectInstanceId=o.u32(),e.targetId=o.u64(),e.expirationTick=o.u64(),e}function v_(o,n){o.u32(n.effectInstanceId),o.u64(n.targetId),o.u64(n.expirationTick)}var x_="StatusEffectDurationNotify";function T_(o,n){let e={};return e.objectId=o.u64(),e.effectInstanceId=o.u32(),e.characterId=o.u64(),e.value=o.u32(),e}function S_(o,n){o.u64(n.objectId),o.u32(n.effectInstanceId),o.u64(n.characterId),o.u32(n.value)}var P_="StatusEffectSyncDataNotify";function N_(o,n){let e={};return e.step=o.u32(),e.unk2_m=o.bool(),e.triggerId=o.u32(),e}function b_(o,n){o.u32(n.step),o.bool(n.unk2_m),o.u32(n.triggerId)}var h_="TriggerBossBattleStatus";function I_(o,n){let e={};return e.packetResultCode=o.u32(),e.triggerId=o.u32(),e.unk0_m=o.u32(),e.involvedPCs=o.array(o.u16(),()=>o.u64(),40),e}function E_(o,n){o.u32(n.packetResultCode),o.u32(n.triggerId),o.u32(n.unk0_m),o.array(n.involvedPCs,{maxLen:40,lenType:"u16"},e=>{o.u64(e)})}var D_="TriggerFinishNotify";function K_(o,n){let e={};return e.triggerId=o.u32(),e.triggerSignalType=o.u32(),e.sourceId=o.u64(),e.involvedPCs=o.array(o.u16(),()=>o.u64(),40),e}function R_(o,n){o.u32(n.triggerId),o.u32(n.triggerSignalType),o.u64(n.sourceId),o.array(n.involvedPCs,{maxLen:40,lenType:"u16"},e=>{o.u64(e)})}var L_="TriggerStartNotify";function A_(o,n){let e={};return e.maxHp=a(o,n),e.characterId=o.u64(),e.unk0_m=o.u32(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.position=o.u64(),e.curHp=a(o,n),e}function w_(o,n){d(o,n.maxHp),o.u64(n.characterId),o.u32(n.unk0_m),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.position),d(o,n.curHp)}var B_="TroopMemberUpdateMinNotify";function C_(o,n){let e={};return e.identityGauge1=o.u32(),e.identityGauge2=o.u32(),e.identityGauge3=o.u32(),e.playerId=o.u64(),e}function M_(o,n){o.u32(n.identityGauge1),o.u32(n.identityGauge2),o.u32(n.identityGauge3),o.u64(n.playerId)}var j_="IdentityGaugeChangeNotify";function F_(o,n){let e={};return e.objectId=o.u64(),e}function q_(o,n){o.u64(n.objectId)}var W_="ZoneObjectUnpublishNotify";function Tr(o,n){let e={};return e.stackCount=o.u8(),e.target=o.u8(),e.id=o.u32(),e}function Sr(o,n){o.u8(n.stackCount),o.u8(n.target),o.u32(n.id)}function g_(o,n){let e={};return e.zoneStatusEffectDataList=o.array(o.u16(),()=>Tr(o,n),4),e}function O_(o,n){o.array(n.zoneStatusEffectDataList,{maxLen:4,lenType:"u16"},e=>{Sr(o,e)})}var U_="ZoneStatusEffectAddNotify";function Z_(o,n){let e={};return e.statusEffectId=o.u32(),e}function z_(o,n){o.u32(n.statusEffectId)}var V_="ZoneStatusEffectRemoveNotify";function H_(o,n){let e={};return e.skillLevel=o.u8(),e.caster=o.u64(),e.skillId=o.u32(),e}function G_(o,n){o.u8(n.skillLevel),o.u64(n.caster),o.u32(n.skillId)}var Y_="SkillCastNotify";function $_(o,n){let e={};return e.objectId=o.u64(),e.stance=o.u8(),e}function J_(o,n){o.u64(n.objectId),o.u8(n.stance)}var Q_="IdentityStanceChangeNotify";function X_(o,n){let e={};return e.objectId=o.u64(),e.equipItemDataList=o.array(o.u16(),()=>K(o,n),32),e}function y_(o,n){o.u64(n.objectId),o.array(n.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{R(o,e)})}var na="EquipChangeNotify";function oa(o,n){let e={};return e.objectId=o.u64(),e.equipLifeToolDataList=o.array(o.u16(),()=>K(o,n),9),e}function ea(o,n){o.u64(n.objectId),o.array(n.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{R(o,e)})}var ta="EquipLifeToolChangeNotify";function Pr(o,n){let e={};return o.bool()&&(e.serialNumber=o.u64(),e.id=o.u32(),e.level=o.u16(),e.slot=o.u16(),e.durability=o.u32(),e.unk1_6_m=o.u32(),e.flag=o.u32(),e.expireTime=c(o),e.lockUpdateTime=c(o)),e}function Nr(o,n){o.bool(n.slot!==void 0)&&(o.u64(n.serialNumber),o.u32(n.id),o.u16(n.level),o.u16(n.slot),o.u32(n.durability),o.u32(n.unk1_6_m),o.u32(n.flag),h(o,n.expireTime),h(o,n.lockUpdateTime))}function ua(o,n){let e={};return e.itemDataList=o.array(o.u16(),()=>Pr(o,n),80),e.storageType=o.u8(),e}function _a(o,n){o.array([1,20].includes(n.storageType)?n.itemDataList:[],{maxLen:80,lenType:"u16"},e=>{Nr(o,e)}),o.u8(n.storageType)}var aa="InitItem";function br(o,n){let e={};return e.npcId=o.u32(),e.isDead=o.bool(),e}function hr(o,n){o.u32(n.npcId),o.bool(n.isDead)}function ra(o,n){let e={};return e.raidResult=o.u8(),e.raidId=o.u32(),e.totalTime=o.u64(),e.bossKillDataList=o.array(o.u16(),()=>br(o,n),3),e.endTick=o.u64(),e.startTick=o.u64(),e}function sa(o,n){o.u8(n.raidResult),o.u32(n.raidId),o.u64(n.totalTime),o.array(n.bossKillDataList,{maxLen:3,lenType:"u16"},e=>{hr(o,e)}),o.u64(n.endTick),o.u64(n.startTick)}var ia="RaidBegin";function ma(o,n){let e={};return e.zoneInstId=o.u64(),e.zoneId=o.u32(),e.loadComplete=o.bool(),e.completeMembers=o.array(o.u16(),()=>o.u64(),40),e.totalMembers=o.array(o.u16(),()=>o.u64(),40),e.firstPCEnterTick=o.u64(),e.zoneLevel=o.u8(),e}function da(o,n){o.u64(n.zoneInstId),o.u32(n.zoneId),o.bool(n.loadComplete),o.array(n.completeMembers,{maxLen:40,lenType:"u16"},e=>{o.u64(e)}),o.array(n.totalMembers,{maxLen:40,lenType:"u16"},e=>{o.u64(e)}),o.u64(n.firstPCEnterTick),o.u8(n.zoneLevel)}var fa="ZoneMemberLoadStatusNotify";function Ir(o,n){let e={};return e.position=r(o),e.objectId=o.u64(),e.ownerId=o.u64(),e.skillId=o.u32(),e.skillEffect=o.u32(),e}function Er(o,n){l(o,n.position),o.u64(n.objectId),o.u64(n.ownerId),o.u32(n.skillId),o.u32(n.skillEffect)}function la(o,n){let e={};return e.trapData=Ir(o,n),e}function ca(o,n){Er(o,n.trapData)}var pa="NewTrap";function ka(o,n){let e={};return e.skillId=o.u32(),e.caster=o.u64(),e.newDirectionYaw=m(o),e.cancelReason=o.u8(),e.newPosition=r(o),e}function va(o,n){o.u32(n.skillId),o.u64(n.caster),S(o,n.newDirectionYaw),o.u8(n.cancelReason),l(o,n.newPosition)}var xa="SkillCancelNotify";function Ta(o,n){let e={};return e.players=o.array(o.u8(),()=>{let t={};return t.name=o.string(20),t.stats=o.array(o.u8(),()=>{let _={};return _.id=o.u8(),_.value=o.u32(),_},100),n>=4&&(t.elixirs=o.array(o.u8(),()=>{let _={};return _.slot=o.u8(),_.entries=o.array(o.u8(),()=>{let s={};return s.level=o.u8(),s.id=o.u32(),s}),_},32)),n>=5&&(t.gems=o.array(o.u8(),()=>{let _={};_.id=o.u32(),_.skillId=o.u32(),_.type=o.u8(),_.value=o.u16()})),t},24),e}function Sa(o,n){o.array(n.players,{maxLen:24,lenType:"u8"},e=>{o.string(e.name,20),o.array(e.stats,{maxLen:100,lenType:"u8"},t=>{o.u8(t.id),o.u32(t.value)}),o.array(e.elixirs,{maxLen:32,lenType:"u8"},t=>{o.u8(t.slot),o.array(t.entries,{maxLen:5,lenType:"u8"},_=>{o.u8(_.level),o.u32(_.id)})}),o.array(e.gems,{maxLen:20,lenType:"u8"},t=>{o.u32(t.id),o.u32(t.skillId),o.u8(t.type),o.u16(t.value)})})}var Pa="APP_StatApi";var Na=new Map([[0,[bt,Pt,Nt]],[1,[Et,ht,It]],[2,[Rt,Dt,Kt]],[4,[wt,Lt,At]],[5,[Mt,Bt,Ct]],[6,[qt,jt,Ft]],[7,[Ot,Wt,gt]],[8,[zt,Ut,Zt]],[9,[Gt,Vt,Ht]],[10,[Jt,Yt,$t]],[11,[yt,Qt,Xt]],[12,[eu,nu,ou]],[13,[_u,tu,uu]],[14,[iu,ru,su]],[15,[fu,mu,du]],[16,[pu,lu,cu]],[17,[xu,ku,vu]],[18,[Pu,Tu,Su]],[19,[hu,Nu,bu]],[20,[Du,Iu,Eu]],[21,[Lu,Ku,Ru]],[22,[Bu,Au,wu]],[23,[ju,Cu,Mu]],[24,[Wu,Fu,qu]],[25,[Uu,gu,Ou]],[26,[Vu,Zu,zu]],[27,[Yu,Hu,Gu]],[28,[Qu,$u,Ju]],[29,[n_,Xu,yu]],[30,[t_,o_,e_]],[31,[a_,u_,__]],[32,[i_,r_,s_]],[34,[f_,m_,d_]],[35,[p_,l_,c_]],[36,[x_,k_,v_]],[37,[P_,T_,S_]],[38,[h_,N_,b_]],[39,[D_,I_,E_]],[40,[L_,K_,R_]],[41,[B_,A_,w_]],[42,[j_,C_,M_]],[43,[W_,F_,q_]],[44,[U_,g_,O_]],[45,[V_,Z_,z_]],[46,[Y_,H_,G_]],[47,[Q_,$_,J_]],[48,[na,X_,y_]],[49,[ta,oa,ea]],[50,[aa,ua,_a]],[52,[ia,ra,sa]],[51,[fa,ma,da]],[53,[pa,la,ca]],[54,[xa,ka,va]],[6e4,[Pa,Ta,Sa]]]);var Ds=require("tiny-typed-emitter");var oo=class{#o;#n;#e;#t;#u;#_;constructor(n,e,t,_,s,i){this.#o=n,this.#n=e,this.#e=t,this.#t=_,this.#u=s,this.#_=i}#a;get parsed(){if(!this.#a)try{this.#a=this.#_(this.#u.decrypt(this.#o,this.#n,this.#e,this.#t))}catch(n){console.error(`[meter-core/pkt-stream] - ${n}`);return}return this.#a}};var qn=class{time;#o;#n;#e;#t;constructor(...n){if(n.length===5){let[e,t,_,s,i]=n;this.#n=e,this.time=_,this.#o=t,this.#e=s,this.#t=i}else if(n.length===3){let[e,t,_]=n;this.#n=Buffer.alloc(0),this.time=new Date,this.#o=t,this.#e=()=>e,this.#t=_}else throw new Error("[meter-core/logger/parser] - LogEvent<T>: Invalid constructor arguments")}#u;get parsed(){if(!this.#u)try{this.#u=this.#e(new u(this.#n))}catch(n){console.error(`[meter-core/logger/parser] - parsed - ${n}`);return}return this.#u}#_;get serialized(){if(!this.#_)try{if(!this.parsed)return;let n=new Un;n.skip(ha),this.#t(n,this.parsed);let e=n.value;e.writeUint16LE(e.length,Kr),e.writeUint16LE(this.#o,to),e.writeUintLE(+new Date,ba,uo),this.#_=n.value}catch(n){console.error(`[meter-core/logger/parser] - serialized - ${n}`);return}return this.#_}},Wn=6,Dr=2,Kr=0,eo=2,to=Kr+Dr,uo=6,ba=to+eo,ha=Dr+eo+uo;var Ar=require("fs");var _o=class{buffer;position;out;constructor(){this.buffer=null,this.position=0,this.out=[]}write(n){for(;n.length>0;){if(this.buffer){if(this.buffer.length<2){let _=this.buffer[0],s=(n[0]<<8)+_;this.buffer=Buffer.alloc(s),this.buffer[0]=_,this.position=1}let t=Math.min(n.length,this.buffer.length-this.position);n.copy(this.buffer,this.position,0,t),this.position+=t,this.position===this.buffer.length&&(this.out.push(this.buffer),this.buffer=null,this.position=0),n=n.subarray(t);continue}if(n.length<2){this.buffer=Buffer.from(n),this.position=n.length;break}let e=n.readUInt16LE(0);if(e===0){this.buffer=null;return}if(e>n.length){this.buffer=Buffer.alloc(e),n.copy(this.buffer),this.position=n.length;break}this.out.push(n.subarray(0,e)),n=n.subarray(e)}}read(){return this.out.shift()}};var wr=require("fs");var gn=class extends Lr.TypedEmitter{},Ia=class extends gn{#o;#n;constructor(n,e,t){super(),this.#o=e,t&&(this.#n=(0,Ar.createWriteStream)(t,{highWaterMark:0}));let _=Buffer.allocUnsafe(Wn);_.writeUIntLE(5,0,Wn),this.#n?.write(_),n.on("*",this.handlePkt.bind(this))}handlePkt(n,e,t,_){try{let s=Tt.get(e),i=ur.get(e);if(s&&i){let[T]=i,[L,b]=s,F=Na.get(T);if(F){let[On,Rs,Br]=F,Da=new oo(Buffer.from(n),e,t,!!_,this.#o,b).parsed;if(!Da)return;let ao=new qn(Da,T,Br);this.emit(On,ao),this.emit("*",On,ao),this.appendLog(ao)}}}catch(s){console.error(s)}}appendLog(n){this.#n&&n.serialized&&this.#n.write(n.serialized)}},Ea=class extends gn{readLogByChunk(n){let e=new _o,t=(0,wr.createReadStream)(n),_=!1,s;t.on("data",i=>{if(s===void 0){if(s=this.readVersion(i),s>5){t.destroy();return}i=i.subarray(Wn)}e.write(i);let T;for(;T=e.read();)this.readLogChunk(T,s)}).on("end",()=>{_=!0,this.emit("fileEnd","end")}).on("close",()=>{_||this.emit("fileEnd","closed")})}readLogChunk(n,e){try{if(n.length<8)return!1;let t=n.readUIntLE(to,eo),_=new Date(n.readUintLE(ba,uo)),s=n.subarray(ha),i=Na.get(t);if(i){let[T,L,b]=i,F=new qn(s,t,new Date(_),On=>L(On,e),b);this.emit(T,F),this.emit("*",T,F)}}catch(t){console.error(t)}}readVersion(n){return n.readUintLE(0,Wn)}};0&&(module.exports={LiveLogger,Logger,ReplayLogger});
